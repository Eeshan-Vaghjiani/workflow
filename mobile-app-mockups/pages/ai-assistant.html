<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant - Study Planner Mobile</title>
    <link rel="stylesheet" href="../assets/css/mobile-app.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .ai-chat-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 44px - 60px - 83px); /* Status bar, header, bottom nav */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .ai-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ai-avatar-large {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 16px;
            color: white;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
        }

        .ai-title {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .ai-subtitle {
            font-size: 14px;
            color: #8e8e93;
            line-height: 1.4;
        }

        .ai-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: #8e8e93;
            font-weight: 500;
        }

        .ai-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
        }

        .message-group {
            margin-bottom: 24px;
        }

        .ai-message {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            flex-shrink: 0;
        }

        .user-avatar {
            background: linear-gradient(135deg, #34c759 0%, #32d74b 100%);
        }

        .message-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 12px 16px;
            border-radius: 16px;
            border-top-left-radius: 4px;
            max-width: 80%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .user-message .message-content {
            background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            color: white;
            border-top-right-radius: 4px;
            border-top-left-radius: 16px;
        }

        .message-text {
            font-size: 15px;
            line-height: 1.4;
            margin: 0;
        }

        .message-time {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 4px;
        }

        .ai-message .message-time {
            color: #8e8e93;
        }

        .ai-input-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 16px 20px 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ai-input-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            border-radius: 24px;
            padding: 8px 8px 8px 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .ai-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            padding: 8px 0;
            background: none;
        }

        .ai-input::placeholder {
            color: #8e8e93;
        }

        .ai-send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-send-btn:hover {
            transform: scale(1.05);
        }

        .ai-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quick-prompts {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .quick-prompt {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 122, 255, 0.3);
            border-radius: 16px;
            padding: 8px 16px;
            font-size: 14px;
            color: #007aff;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .quick-prompt:hover {
            background: #007aff;
            color: white;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #8e8e93;
            animation: typingPulse 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingPulse {
            0%, 60%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            30% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .suggestion-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(0, 122, 255, 0.2);
        }

        .suggestion-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 122, 255, 0.2);
        }

        .suggestion-icon {
            font-size: 24px;
            color: #007aff;
            margin-bottom: 8px;
        }

        .suggestion-title {
            font-size: 14px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 4px;
        }

        .suggestion-desc {
            font-size: 12px;
            color: #8e8e93;
            line-height: 1.3;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="phone-frame">
            <div class="phone-screen">
                <!-- Status Bar -->
                <div class="status-bar">
                    <div class="time">9:41</div>
                    <div class="icons">
                        <i class="fas fa-signal"></i>
                        <i class="fas fa-wifi"></i>
                        <i class="fas fa-battery-three-quarters"></i>
                    </div>
                </div>

                <!-- App Header -->
                <div class="app-header">
                    <h1>AI Assistant</h1>
                    <div class="header-actions">
                        <button class="btn-icon" onclick="clearChat()">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="btn-icon" onclick="showSettings()">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>

                <!-- AI Chat Container -->
                <div class="ai-chat-container">
                    <!-- AI Header -->
                    <div class="ai-header">
                        <div class="ai-avatar-large">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="ai-title">Study Assistant</div>
                        <div class="ai-subtitle">Your AI-powered study companion. Ask me anything about your assignments, schedule, or study tips!</div>
                    </div>

                    <!-- AI Stats -->
                    <div class="ai-stats">
                        <div class="stat-card">
                            <div class="stat-number" style="color: #007aff;">7</div>
                            <div class="stat-label">Prompts Left</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" style="color: #34c759;">12</div>
                            <div class="stat-label">Helped Today</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" style="color: #ff9500;">85%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div class="ai-messages" id="messagesContainer">
                        <div class="message-group">
                            <div class="ai-message">
                                <div class="message-avatar">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <div class="message-content">
                                    <div class="message-text">Hello! I'm your AI study assistant. I can help you with:</div>
                                    <div class="suggestions-grid">
                                        <div class="suggestion-card" onclick="sendQuickPrompt('Help me organize my study schedule')">
                                            <div class="suggestion-icon">üìÖ</div>
                                            <div class="suggestion-title">Study Planning</div>
                                            <div class="suggestion-desc">Organize schedules & set goals</div>
                                        </div>
                                        <div class="suggestion-card" onclick="sendQuickPrompt('Explain this concept in simple terms')">
                                            <div class="suggestion-icon">üí°</div>
                                            <div class="suggestion-title">Concept Explanation</div>
                                            <div class="suggestion-desc">Break down complex topics</div>
                                        </div>
                                        <div class="suggestion-card" onclick="sendQuickPrompt('Create practice questions for my exam')">
                                            <div class="suggestion-icon">‚ùì</div>
                                            <div class="suggestion-title">Practice Questions</div>
                                            <div class="suggestion-desc">Generate quizzes & tests</div>
                                        </div>
                                        <div class="suggestion-card" onclick="sendQuickPrompt('Give me study tips for better focus')">
                                            <div class="suggestion-icon">üéØ</div>
                                            <div class="suggestion-title">Study Tips</div>
                                            <div class="suggestion-desc">Improve focus & productivity</div>
                                        </div>
                                    </div>
                                    <div class="message-time">Just now</div>
                                </div>
                            </div>
                        </div>

                        <!-- Typing Indicator -->
                        <div class="ai-message typing-indicator" id="typingIndicator">
                            <div class="message-avatar">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="message-content">
                                <div class="typing-dots">
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="ai-input-container">
                        <div class="quick-prompts">
                            <div class="quick-prompt" onclick="sendQuickPrompt('Help me prioritize my tasks')">üìã Prioritize tasks</div>
                            <div class="quick-prompt" onclick="sendQuickPrompt('Explain this assignment')">üìù Explain assignment</div>
                            <div class="quick-prompt" onclick="sendQuickPrompt('Study tips for exam')">üéì Study tips</div>
                            <div class="quick-prompt" onclick="sendQuickPrompt('Create a study plan')">üìö Study plan</div>
                        </div>
                        <div class="ai-input-wrapper">
                            <input 
                                type="text" 
                                class="ai-input" 
                                id="aiInput"
                                placeholder="Ask me anything about your studies..."
                                onkeypress="handleKeyPress(event)"
                            >
                            <button class="ai-send-btn" id="sendBtn" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bottom Navigation -->
                <div class="bottom-nav">
                    <a href="dashboard.html" class="nav-item">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="groups.html" class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Groups</span>
                    </a>
                    <a href="tasks.html" class="nav-item">
                        <i class="fas fa-tasks"></i>
                        <span>Tasks</span>
                    </a>
                    <a href="calendar.html" class="nav-item">
                        <i class="fas fa-calendar"></i>
                        <span>Calendar</span>
                    </a>
                    <a href="chat.html" class="nav-item">
                        <i class="fas fa-comments"></i>
                        <span>Chat</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messageCount = 0;

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addUserMessage(message);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                addAIResponse(message);
            }, 1500 + Math.random() * 1000);
        }

        function sendQuickPrompt(prompt) {
            document.getElementById('aiInput').value = prompt;
            sendMessage();
        }

        function addUserMessage(message) {
            const messagesContainer = document.getElementById('messagesContainer');
            const messageGroup = document.createElement('div');
            messageGroup.className = 'message-group';
            
            messageGroup.innerHTML = `
                <div class="ai-message user-message">
                    <div class="message-avatar user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-text">${message}</div>
                        <div class="message-time">${getCurrentTime()}</div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageGroup);
            scrollToBottom();
        }

        function addAIResponse(userMessage) {
            const messagesContainer = document.getElementById('messagesContainer');
            const messageGroup = document.createElement('div');
            messageGroup.className = 'message-group';
            
            const response = generateAIResponse(userMessage);
            
            messageGroup.innerHTML = `
                <div class="ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-text">${response}</div>
                        <div class="message-time">${getCurrentTime()}</div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageGroup);
            scrollToBottom();
            
            // Update prompt count
            updatePromptCount();
        }

        function generateAIResponse(userMessage) {
            const responses = [
                "Great question! Let me help you with that. Based on your study patterns, I recommend breaking this down into smaller, manageable chunks.",
                "I understand what you're looking for. Here's a personalized approach that should work well for your learning style.",
                "That's an excellent topic to focus on! I can help you create a structured study plan that covers all the important aspects.",
                "Perfect! I can see you're working hard on your studies. Let me provide some targeted advice for this specific challenge.",
                "Good thinking! This is a common area where students need support. Here's my recommendation based on proven study techniques.",
                "I can definitely help with that! Let me break this down into actionable steps that you can implement right away."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
            scrollToBottom();
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function scrollToBottom() {
            const messagesContainer = document.getElementById('messagesContainer');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        function updatePromptCount() {
            messageCount++;
            const promptsLeft = Math.max(0, 7 - Math.floor(messageCount / 2));
            document.querySelector('.stat-card .stat-number').textContent = promptsLeft;
            
            if (promptsLeft === 0) {
                showUpgradePrompt();
            }
        }

        function showUpgradePrompt() {
            const messagesContainer = document.getElementById('messagesContainer');
            const messageGroup = document.createElement('div');
            messageGroup.className = 'message-group';
            
            messageGroup.innerHTML = `
                <div class="ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-text">You've used all your free prompts for today! Upgrade to Premium for unlimited AI assistance.</div>
                        <div style="margin-top: 12px;">
                            <button class="quick-prompt" onclick="showUpgradeOptions()" style="background: #007aff; color: white; border: none;">
                                Upgrade to Premium
                            </button>
                        </div>
                        <div class="message-time">${getCurrentTime()}</div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageGroup);
            scrollToBottom();
        }

        function clearChat() {
            const messagesContainer = document.getElementById('messagesContainer');
            // Keep only the welcome message
            const welcomeMessage = messagesContainer.querySelector('.message-group');
            messagesContainer.innerHTML = '';
            messagesContainer.appendChild(welcomeMessage);
            
            // Reset counter
            messageCount = 0;
            document.querySelector('.stat-card .stat-number').textContent = '7';
            
            showNotification('Chat cleared successfully!', 'success');
        }

        function showSettings() {
            showNotification('AI settings would open here', 'info');
        }

        function showUpgradeOptions() {
            showNotification('Upgrade options would open here', 'info');
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#34c759' : '#007aff'};
                color: white;
                padding: 16px 20px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                z-index: 1001;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('aiInput').focus();
        });
    </script>
    <script src="../assets/js/theme.js"></script>
</body>
</html>