<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - Study Planner Mobile</title>
    <link rel="stylesheet" href="../assets/css/mobile-app.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* WhatsApp-like Chat Styles */
        .chat-list-view {
            display: block;
        }
        
        .chat-conversation-view {
            display: none;
        }
        
        .whatsapp-header {
            background: #075e54;
            color: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-header {
            background: #128c7e;
            color: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fff;
            color: #075e54;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .chat-info h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }
        
        .chat-status {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 2px;
        }
        
        .chat-actions {
            margin-left: auto;
            display: flex;
            gap: 16px;
        }
        
        .chat-actions button {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .chat-actions button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .message-list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-bottom: 1px solid #e5e5ea;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .message-list-item:hover {
            background: #f8f9fa;
        }
        
        .message-list-item:last-child {
            border-bottom: none;
        }
        
        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #dcf8c6;
            color: #075e54;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            flex-shrink: 0;
            position: relative;
        }
        
        .online-dot {
            width: 12px;
            height: 12px;
            background: #25d366;
            border: 2px solid white;
            border-radius: 50%;
            position: absolute;
            bottom: 0;
            right: 0;
        }
        
        .message-preview {
            flex: 1;
            min-width: 0;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }
        
        .sender-name {
            font-weight: 600;
            font-size: 16px;
            color: #1d1d1f;
        }
        
        .message-time {
            font-size: 12px;
            color: #8e8e93;
        }
        
        .message-text {
            font-size: 14px;
            color: #8e8e93;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .unread-count {
            background: #25d366;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 12px;
            font-weight: 600;
            min-width: 18px;
            text-align: center;
            margin-left: 8px;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: #e5ddd5;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><circle cx="20" cy="20" r="1" fill="%23ffffff" opacity="0.1"/></svg>');
            height: calc(100% - 64px - 60px);
        }
        
        .message-bubble {
            max-width: 80%;
            margin-bottom: 8px;
            word-wrap: break-word;
        }
        
        .message-bubble.sent {
            background: #dcf8c6;
            margin-left: auto;
            border-radius: 18px 18px 4px 18px;
            padding: 8px 12px;
            position: relative;
        }
        
        .message-bubble.received {
            background: white;
            margin-right: auto;
            border-radius: 18px 18px 18px 4px;
            padding: 8px 12px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }
        
        .message-content {
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 4px;
        }
        
        .message-meta {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            color: #8e8e93;
        }
        
        .message-status {
            color: #34c759;
        }
        
        .chat-input-container {
            background: #f2f2f7;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        
        .input-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-btn {
            background: none;
            border: none;
            color: #8e8e93;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .input-btn:hover {
            background: #e5e5ea;
            color: #007aff;
        }
        
        .message-input {
            flex: 1;
            background: white;
            border: 1px solid #e5e5ea;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            outline: none;
            resize: none;
            max-height: 100px;
        }
        
        .message-input:focus {
            border-color: #007aff;
        }
        
        .send-btn {
            background: #007aff;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .send-btn:hover {
            background: #0056cc;
        }
        
        .send-btn:disabled {
            background: #8e8e93;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            display: none;
            padding: 8px 16px;
            background: #f8f9fa;
            font-size: 12px;
            color: #8e8e93;
            position: absolute;
            bottom: 60px;
            left: 0;
            right: 0;
        }
        
        .typing-dots {
            display: inline-flex;
            gap: 2px;
        }
        
        .typing-dot {
            width: 4px;
            height: 4px;
            background: #8e8e93;
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-8px);
            }
        }
        
        .emoji-picker {
            display: none;
            position: absolute;
            bottom: 60px;
            right: 16px;
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            z-index: 100;
            max-width: 280px;
        }
        
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
        }
        
        .emoji-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .emoji-btn:hover {
            background: #f2f2f7;
        }
        
        /* Dark mode styles */
        [data-theme="dark"] .whatsapp-header {
            background: #2a2f32;
        }
        
        [data-theme="dark"] .chat-header {
            background: #2a2f32;
        }
        
        [data-theme="dark"] .message-list-item {
            border-bottom-color: #38383a;
        }
        
        [data-theme="dark"] .message-list-item:hover {
            background: #3a3a3c;
        }
        
        [data-theme="dark"] .sender-name {
            color: #fff;
        }
        
        [data-theme="dark"] .chat-messages {
            background: #0b141a;
        }
        
        [data-theme="dark"] .message-bubble.received {
            background: #2a2f32;
            color: #fff;
        }
        
        [data-theme="dark"] .chat-input-container {
            background: #2a2f32;
        }
        
        [data-theme="dark"] .message-input {
            background: #3a3a3c;
            border-color: #38383a;
            color: #fff;
        }
        
        [data-theme="dark"] .emoji-picker {
            background: #2c2c2e;
        }
        
        [data-theme="dark"] .typing-indicator {
            background: #2a2f32;
            border-top-color: #38383a;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Side Controls -->
        <div class="side-controls">
            <div class="theme-toggle" title="Toggle Dark/Light Mode">
            </div>
            <div class="theme-label">Light Mode</div>
        </div>
        
        <div class="phone-frame">
            <div class="phone-screen">
                <!-- Status Bar -->
                <div class="status-bar">
                    <div class="time">9:41</div>
                    <div class="icons">
                        <i class="fas fa-signal"></i>
                        <i class="fas fa-wifi"></i>
                        <i class="fas fa-battery-three-quarters"></i>
                    </div>
                </div>

                <!-- Chat List View -->
                <div class="chat-list-view">
                    <!-- WhatsApp Header -->
                    <div class="whatsapp-header">
                        <h1 style="margin: 0; font-size: 20px; font-weight: 600;">StudyChat</h1>
                        <div class="chat-actions">
                            <button onclick="showSearch()" title="Search">
                                <i class="fas fa-search"></i>
                            </button>
                            <button onclick="showMenu()" title="Menu">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Content Area -->
                    <div style="height: calc(100% - 44px - 64px - 83px); overflow-y: auto; background: white;">
                        <!-- Chat List -->
                        <div class="message-list-item" onclick="openChat('sarah')">
                            <div class="message-avatar">
                                S
                                <div class="online-dot"></div>
                            </div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">Sarah Johnson</div>
                                    <div class="message-time">2:30 PM</div>
                                </div>
                                <div class="message-text">
                                    <span>Hey! Did you finish the math assignment? üìö</span>
                                    <div class="unread-count">2</div>
                                </div>
                            </div>
                        </div>

                        <div class="message-list-item" onclick="openChat('studygroup')">
                            <div class="message-avatar">
                                SG
                                <div class="online-dot"></div>
                            </div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">Study Group</div>
                                    <div class="message-time">1:45 PM</div>
                                </div>
                                <div class="message-text">
                                    <span>Mike: Let's meet at 6 PM today</span>
                                    <div class="unread-count">5</div>
                                </div>
                            </div>
                        </div>

                        <div class="message-list-item" onclick="openChat('alex')">
                            <div class="message-avatar">A</div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">Alex Chen</div>
                                    <div class="message-time">12:20 PM</div>
                                </div>
                                <div class="message-text">
                                    <i class="fas fa-check" style="color: #34c759;"></i>
                                    <span>Great job on the presentation! üëè</span>
                                </div>
                            </div>
                        </div>

                        <div class="message-list-item" onclick="openChat('emma')">
                            <div class="message-avatar">E</div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">Emma Wilson</div>
                                    <div class="message-time">11:30 AM</div>
                                </div>
                                <div class="message-text">
                                    <i class="fas fa-check-double" style="color: #34c759;"></i>
                                    <span>Thanks for the notes! üìù</span>
                                </div>
                            </div>
                        </div>

                        <div class="message-list-item" onclick="openChat('physics')">
                            <div class="message-avatar">P</div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">Physics Study Group</div>
                                    <div class="message-time">Yesterday</div>
                                </div>
                                <div class="message-text">
                                    <span>Lab report due tomorrow!</span>
                                    <div class="unread-count">3</div>
                                </div>
                            </div>
                        </div>

                        <div class="message-list-item" onclick="openChat('james')">
                            <div class="message-avatar">J</div>
                            <div class="message-preview">
                                <div class="message-header">
                                    <div class="sender-name">James Rodriguez</div>
                                    <div class="message-time">Yesterday</div>
                                </div>
                                <div class="message-text">
                                    <i class="fas fa-check-double" style="color: #34c759;"></i>
                                    <span>See you in class! üéì</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat Conversation View -->
                <div class="chat-conversation-view">
                    <!-- Chat Header -->
                    <div class="chat-header">
                        <button onclick="goBackToList()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer; padding: 8px; margin-right: 8px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="chat-avatar" id="chatAvatar">S</div>
                        <div class="chat-info">
                            <h3 id="chatName">Sarah Johnson</h3>
                            <div class="chat-status" id="chatStatus">Online</div>
                        </div>
                        <div class="chat-actions">
                            <button onclick="openCamera()" title="Camera">
                                <i class="fas fa-camera"></i>
                            </button>
                            <button onclick="makeCall()" title="Call">
                                <i class="fas fa-phone"></i>
                            </button>
                            <button onclick="showChatMenu()" title="Menu">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div class="chat-messages" id="chatMessages">
                        <div class="message-bubble received">
                            <div class="message-content">Hey! How's the math assignment going?</div>
                            <div class="message-meta">2:25 PM</div>
                        </div>
                        
                        <div class="message-bubble sent">
                            <div class="message-content">Pretty good! Just finished problem 3. You?</div>
                            <div class="message-meta">
                                2:26 PM
                                <i class="fas fa-check-double message-status"></i>
                            </div>
                        </div>
                        
                        <div class="message-bubble received">
                            <div class="message-content">Still working on it üòÖ. Can you help me with question 5?</div>
                            <div class="message-meta">2:28 PM</div>
                        </div>
                        
                        <div class="message-bubble sent">
                            <div class="message-content">Sure! Let me send you a photo of my solution üì∏</div>
                            <div class="message-meta">
                                2:29 PM
                                <i class="fas fa-check-double message-status"></i>
                            </div>
                        </div>
                        
                        <div class="message-bubble received">
                            <div class="message-content">Thanks so much! You're a lifesaver! üôè</div>
                            <div class="message-meta">2:30 PM</div>
                        </div>
                    </div>

                    <!-- Typing Indicator -->
                    <div class="typing-indicator" id="typingIndicator">
                        <span id="typingText">Sarah is typing</span>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>

                    <!-- Message Input -->
                    <div class="chat-input-container">
                        <div class="input-actions">
                            <button class="input-btn" onclick="toggleEmojiPicker()" title="Emoji">
                                <i class="fas fa-smile"></i>
                            </button>
                            <button class="input-btn" onclick="attachFile()" title="Attach">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <button class="input-btn" onclick="openCamera()" title="Camera">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <textarea 
                            class="message-input" 
                            id="messageInput"
                            placeholder="Type a message..."
                            rows="1"
                            onkeypress="handleKeyPress(event)"
                            oninput="handleInputChange()"
                        ></textarea>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>

                    <!-- Emoji Picker -->
                    <div class="emoji-picker" id="emojiPicker">
                        <div class="emoji-grid">
                            <button class="emoji-btn" onclick="insertEmoji('üòÄ')">üòÄ</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòÉ')">üòÉ</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòÑ')">üòÑ</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòÅ')">üòÅ</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòä')">üòä</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòç')">üòç</button>
                            <button class="emoji-btn" onclick="insertEmoji('ü§î')">ü§î</button>
                            <button class="emoji-btn" onclick="insertEmoji('üòÖ')">üòÖ</button>
                            <button class="emoji-btn" onclick="insertEmoji('üëç')">üëç</button>
                            <button class="emoji-btn" onclick="insertEmoji('üëè')">üëè</button>
                            <button class="emoji-btn" onclick="insertEmoji('üôè')">üôè</button>
                            <button class="emoji-btn" onclick="insertEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                            <button class="emoji-btn" onclick="insertEmoji('üìö')">üìö</button>
                            <button class="emoji-btn" onclick="insertEmoji('üìù')">üìù</button>
                            <button class="emoji-btn" onclick="insertEmoji('üì∏')">üì∏</button>
                            <button class="emoji-btn" onclick="insertEmoji('üéì')">üéì</button>
                        </div>
                    </div>
                </div>

                <!-- Bottom Navigation -->
                <div class="bottom-nav">
                    <a href="dashboard.html" class="nav-item">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="groups.html" class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Groups</span>
                    </a>
                    <a href="tasks.html" class="nav-item">
                        <i class="fas fa-tasks"></i>
                        <span>Tasks</span>
                    </a>
                    <a href="calendar.html" class="nav-item">
                        <i class="fas fa-calendar"></i>
                        <span>Calendar</span>
                    </a>
                    <a href="chat.html" class="nav-item active">
                        <i class="fas fa-comments"></i>
                        <span>Chat</span>
                    </a>
                </div>
            </div>
        </div>

    <script>
        // WhatsApp-like Chat Functionality
        let currentChat = null;
        let isEmojiPickerOpen = false;
        
        // Chat data
        const chatData = {
            'sarah': {
                name: 'Sarah Johnson',
                avatar: 'S',
                status: 'Online',
                messages: [
                    {type: 'received', content: 'Hey! How\'s the math assignment going?', time: '2:25 PM'},
                    {type: 'sent', content: 'Pretty good! Just finished problem 3. You?', time: '2:26 PM'},
                    {type: 'received', content: 'Still working on it üòÖ. Can you help me with question 5?', time: '2:28 PM'},
                    {type: 'sent', content: 'Sure! Let me send you a photo of my solution üì∏', time: '2:29 PM'},
                    {type: 'received', content: 'Thanks so much! You\'re a lifesaver! üôè', time: '2:30 PM'}
                ]
            },
            'studygroup': {
                name: 'Study Group',
                avatar: 'SG',
                status: '5 members online',
                messages: [
                    {type: 'received', content: 'Mike: Hey everyone! Ready for tonight\'s session?', time: '1:40 PM'},
                    {type: 'received', content: 'Lisa: Yes! I have the chemistry notes ready', time: '1:42 PM'},
                    {type: 'sent', content: 'Perfect! I\'ll bring my physics textbook', time: '1:43 PM'},
                    {type: 'received', content: 'Mike: Let\'s meet at 6 PM today', time: '1:45 PM'}
                ]
            },
            'alex': {
                name: 'Alex Chen',
                avatar: 'A',
                status: 'Last seen 10 minutes ago',
                messages: [
                    {type: 'sent', content: 'How did the presentation go?', time: '12:15 PM'},
                    {type: 'received', content: 'Great job on the presentation! üëè', time: '12:20 PM'},
                    {type: 'sent', content: 'Thanks! Couldn\'t have done it without your help', time: '12:21 PM'}
                ]
            }
        };
        
        function openChat(chatId) {
            const listView = document.querySelector('.chat-list-view');
            const conversationView = document.querySelector('.chat-conversation-view');
            const chat = chatData[chatId];
            
            if (!chat) return;
            
            currentChat = chatId;
            
            // Update chat header
            document.getElementById('chatAvatar').textContent = chat.avatar;
            document.getElementById('chatName').textContent = chat.name;
            document.getElementById('chatStatus').textContent = chat.status;
            
            // Update messages
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '';
            
            chat.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message-bubble ${message.type}`;
                messageDiv.innerHTML = `
                    <div class="message-content">${message.content}</div>
                    <div class="message-meta">
                        ${message.time}
                        ${message.type === 'sent' ? '<i class="fas fa-check-double message-status"></i>' : ''}
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Switch views
            listView.style.display = 'none';
            conversationView.style.display = 'block';
            
            // Simulate typing indicator occasionally
            if (Math.random() > 0.7) {
                setTimeout(showTypingIndicator, 1000);
            }
        }
        
        function goBackToList() {
            const listView = document.querySelector('.chat-list-view');
            const conversationView = document.querySelector('.chat-conversation-view');
            
            listView.style.display = 'block';
            conversationView.style.display = 'none';
            
            hideTypingIndicator();
            hideEmojiPicker();
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message || !currentChat) return;
            
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-bubble sent';
            messageDiv.innerHTML = `
                <div class="message-content">${message}</div>
                <div class="message-meta">
                    ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                    <i class="fas fa-check-double message-status"></i>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Add to chat data
            chatData[currentChat].messages.push({
                type: 'sent',
                content: message,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            
            // Clear input
            input.value = '';
            updateSendButton();
            
            // Auto-resize textarea
            input.style.height = 'auto';
            
            // Simulate response
            setTimeout(simulateResponse, 1500);
        }
        
        function simulateResponse() {
            if (!currentChat) return;
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                const responses = [
                    'Got it! Thanks! üëç',
                    'That makes sense! üòä',
                    'Perfect! See you later! üëã',
                    'Thanks for the help! üôè',
                    'Great point! üí°'
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)];
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message-bubble received';
                messageDiv.innerHTML = `
                    <div class="message-content">${response}</div>
                    <div class="message-meta">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                `;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 2000);
        }
        
        function showTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'block';
        }
        
        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            indicator.style.display = 'none';
        }
        
        function toggleEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            isEmojiPickerOpen = !isEmojiPickerOpen;
            picker.style.display = isEmojiPickerOpen ? 'block' : 'none';
        }
        
        function hideEmojiPicker() {
            const picker = document.getElementById('emojiPicker');
            picker.style.display = 'none';
            isEmojiPickerOpen = false;
        }
        
        function insertEmoji(emoji) {
            const input = document.getElementById('messageInput');
            input.value += emoji;
            updateSendButton();
            input.focus();
            hideEmojiPicker();
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }
        
        function handleInputChange() {
            updateSendButton();
            autoResize();
        }
        
        function updateSendButton() {
            const input = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = !input.value.trim();
        }
        
        function autoResize() {
            const input = document.getElementById('messageInput');
            input.style.height = 'auto';
            input.style.height = Math.min(input.scrollHeight, 100) + 'px';
        }
        
        function attachFile() {
            alert('üìé File attachment feature coming soon!');
        }
        
        function openCamera() {
            alert('üì∑ Camera feature coming soon!');
        }
        
        function makeCall() {
            alert('üìû Voice call feature coming soon!');
        }
        
        function showSearch() {
            alert('üîç Search feature coming soon!');
        }
        
        function showMenu() {
            alert('‚öôÔ∏è Menu options coming soon!');
        }
        
        function showChatMenu() {
            alert('‚öôÔ∏è Chat options coming soon!');
        }
        
        // Close emoji picker when clicking outside
        document.addEventListener('click', (e) => {
            const picker = document.getElementById('emojiPicker');
            const emojiBtn = e.target.closest('[onclick*="toggleEmojiPicker"]');
            
            if (!picker.contains(e.target) && !emojiBtn && isEmojiPickerOpen) {
                hideEmojiPicker();
            }
        });
    </script>
    <script src="../assets/js/theme.js"></script>
    </div> <!-- Close app-container -->
</body>
</html>