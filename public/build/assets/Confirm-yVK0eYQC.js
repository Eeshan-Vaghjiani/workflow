import{r as m,j as e,$ as y,m as p,a as v}from"./app-Bpl7UGUW.js";import{A as C}from"./app-layout-BVbkYQEz.js";import{B as d}from"./button-nI1-8HXs.js";import{e as x,C as h,a as u,b as j,c as f,d as P}from"./card-CzKFM-Bc.js";import{I as w}from"./input-CQiJ7d6K.js";import{L as S}from"./label-Djyhicxk.js";import{A}from"./arrow-left-D30Se4B-.js";import{C as N}from"./check-CIZ-Ep7I.js";import{S as I}from"./shopping-bag-D07cFb94.js";import"./app-sidebar-layout-3CLlJw7C.js";import"./index-D71eR4x0.js";import"./index-DktHM2-i.js";import"./utils-CBfrqCZ4.js";import"./dropdown-menu-fbT6E9Fk.js";import"./index-DH-cxLSN.js";import"./index-CMRx08MW.js";import"./index-Ct9M_J9d.js";import"./avatar-B2MfT7TY.js";import"./index-DNoKO7hz.js";import"./createLucideIcon-rZimPHd5.js";import"./use-animation-l8PqFNwu.js";import"./use-animation-B-tVBdbv.js";import"./proxy-BZsCD5Dk.js";import"./chevron-right-DNIHTrhx.js";import"./users-UITC1FaJ.js";import"./square-check-big-B0Q9VKGE.js";import"./calendar-BpKIoVUT.js";import"./credit-card-DNKN2izi.js";import"./user-CnsbQcIt.js";import"./use-appearance-DBkYCLhm.js";import"./sun-Bv7wBj0o.js";import"./settings-GAq3FU_8.js";import"./glass-container-CJ4c02pk.js";import"./index-BO9oOdSc.js";function ce({package:s}){const[a,b]=m.useState(""),[n,i]=m.useState(!1),[c,o]=m.useState(null),g=async r=>{r.preventDefault(),i(!0),o(null);try{const t={package_id:s.id,phone_number:a},l=await v.post("/api/pricing/purchase",t);l.data.success?p.visit("/pricing",{onSuccess:()=>{}}):(o(l.data.error||"Failed to process payment"),i(!1))}catch(t){o(t.response?.data?.error||"An error occurred during payment"),i(!1)}};return e.jsxs(C,{children:[e.jsx(y,{title:"Confirm Purchase"}),e.jsxs("div",{className:"container max-w-4xl py-8",children:[e.jsxs(d,{variant:"ghost",className:"mb-8",onClick:()=>p.visit("/pricing"),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Back to Pricing"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-4",children:"Confirm Your Purchase"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["You're about to purchase the ",s.name," package with ",s.prompts_count," AI prompts."]}),e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(u,{children:"Package Details"}),e.jsx(j,{children:"Review your selected package"})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"font-bold",children:[s.currency," ",s.price.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm",children:[s.prompts_count," AI prompts"]})]}),s.features.map((r,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm",children:r})]},t))]})]})]})]}),e.jsx("div",{children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx("div",{className:"mx-auto bg-primary/10 p-3 rounded-full mb-4",children:e.jsx(I,{className:"h-6 w-6 text-primary"})}),e.jsx(u,{className:"text-center",children:"Payment Information"}),e.jsx(j,{className:"text-center",children:"Enter your M-Pesa phone number to complete payment"})]}),e.jsx(f,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"phone",children:"M-Pesa Phone Number"}),e.jsx(w,{id:"phone",placeholder:"e.g. 254712345678",value:a,onChange:r=>b(r.target.value),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your M-Pesa registered phone number"})]}),c&&e.jsx("div",{className:"text-sm text-destructive",children:c}),e.jsx(P,{className:"flex flex-col px-0",children:e.jsx(d,{type:"submit",className:"w-full",disabled:n||!a,children:n?"Processing...":"Confirm Payment"})})]})})]})})]})]})]})}export{ce as default};
