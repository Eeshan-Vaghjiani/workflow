import{r as a,a as c,j as e,$ as G,Y as n}from"./app-EFdNlzF1.js";import{A as R,M as B}from"./app-sidebar-layout-2N2f9zf2.js";import{A as m,a as o,b as d}from"./avatar-DTxGSWKN.js";import{B as E}from"./button-CasVOQbR.js";import{I as H}from"./input-Bk2B3GPX.js";import{S as x}from"./scroll-area-CZnOwY_f.js";import{C as h,a as p}from"./card-BCz-9kZc.js";import{B as f}from"./badge-DBoevtvU.js";import{G as g}from"./glass-container-DKPWOAO6.js";import{m as t}from"./proxy-CbQpuZ5T.js";import{S as I}from"./search-CVggSWwQ.js";import{U as T}from"./user-C97Zk_aQ.js";import{U as y}from"./users-BhyyQbJ9.js";import{P}from"./plus-rumEydhk.js";import"./index-DZoa35Y7.js";import"./index-c1zC8zW2.js";import"./utils-CBfrqCZ4.js";import"./dropdown-menu-Be5dVAII.js";import"./index-W8SXwZza.js";import"./index-z8h15STC.js";import"./index-CXYmmwmY.js";import"./createLucideIcon-Ci57Z1nb.js";import"./use-animation-WpyryXH0.js";import"./use-animation-BzGI8ib-.js";import"./chevron-right-BAVANYz7.js";import"./square-check-big-DO1D6uu6.js";import"./calendar-BAuuk18F.js";import"./credit-card-BbHoo0vm.js";import"./use-appearance-B35erkEd.js";import"./sun-Dv7cDcCR.js";import"./settings-hZB-BaSU.js";import"./index-B4gP1Yw4.js";import"./index-BdQq_4o_.js";function fe({auth:v}){const w=[{title:"Chat",href:"/chat"}],[r,b]=a.useState(""),[C,k]=a.useState([]),[S,A]=a.useState([]),[j,L]=a.useState([]),[u,N]=a.useState(!0);a.useEffect(()=>{U()},[]);const U=async()=>{try{N(!0);const[s,M,$]=await Promise.all([c.get("/api/users"),c.get("/api/groups"),c.get("/api/conversations")]);k(s.data||[]),A(M.data||[]),L($.data||[])}catch(s){console.error("Error loading chat data:",s)}finally{N(!1)}},l=C.filter(s=>s.id!==v.user.id&&s.name.toLowerCase().includes(r.toLowerCase())),i=S.filter(s=>s.name.toLowerCase().includes(r.toLowerCase()));return e.jsxs(R,{breadcrumbs:w,children:[e.jsx(G,{title:"Chat"}),e.jsxs(t.div,{className:"p-6 space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Messages"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Connect with your colleagues and groups"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search users and groups...",value:r,onChange:s=>b(s.target.value),className:"pl-10"})]}),j.length>0&&e.jsxs(g,{className:"p-6",children:[e.jsx(h,{className:"px-0 pb-4",children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Recent Conversations"]})}),e.jsx(x,{className:"h-[200px]",children:e.jsx("div",{className:"space-y-2",children:j.map(s=>e.jsx(n,{href:`/chat/direct/${s.user.id}`,className:"block",children:e.jsxs(t.div,{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs(m,{className:"h-10 w-10",children:[e.jsx(o,{src:s.user.avatar,alt:s.user.name}),e.jsx(d,{children:s.user.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.user.name}),s.lastMessage&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s.lastMessage.content})]}),s.unreadCount>0&&e.jsx(f,{variant:"destructive",className:"ml-2",children:s.unreadCount})]})},s.user.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"p-6",children:[e.jsx(h,{className:"px-0 pb-4",children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Users (",l.length,")"]})}),e.jsx(x,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2",children:u?e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading users..."}):l.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users found"}):l.map(s=>e.jsx(n,{href:`/chat/direct/${s.id}`,className:"block",children:e.jsxs(t.div,{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs(m,{className:"h-10 w-10",children:[e.jsx(o,{src:s.avatar,alt:s.name}),e.jsx(d,{children:s.name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.email})]}),s.status&&e.jsx("div",{className:`w-3 h-3 rounded-full ${s.status==="online"?"bg-green-500":s.status==="away"?"bg-yellow-500":"bg-gray-400"}`})]})},s.id))})})]}),e.jsxs(g,{className:"p-6",children:[e.jsx(h,{className:"px-0 pb-4",children:e.jsxs(p,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Groups (",i.length,")"]}),e.jsxs(E,{size:"sm",variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),"New Group"]})]})}),e.jsx(x,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2",children:u?e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading groups..."}):i.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No groups found"}):i.map(s=>e.jsx(n,{href:`/chat/group/${s.id}`,className:"block",children:e.jsxs(t.div,{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs(m,{className:"h-10 w-10",children:[e.jsx(o,{src:s.avatar,alt:s.name}),e.jsx(d,{children:e.jsx(y,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),s.unreadCount&&s.unreadCount>0&&e.jsx(f,{variant:"destructive",className:"text-xs",children:s.unreadCount})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.description||`${s.memberCount||0} members`}),s.lastMessage&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate mt-1",children:[s.lastMessage.sender,": ",s.lastMessage.content]})]})]})},s.id))})})]})]})]})]})}export{fe as default};
