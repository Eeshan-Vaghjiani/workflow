import{r as x,j as t,$ as D}from"./app-EFdNlzF1.js";import{A as P}from"./admin-layout-CpXbS8hC.js";import{C as r}from"./card-3d-Bo48T8xr.js";import{B as C}from"./button-CasVOQbR.js";import{c as h,g as R}from"./pdfUtils-DUNMNy8i.js";import{D as T}from"./download-CTgQyxIJ.js";import{a0 as j,a1 as g,a2 as u,a3 as f,a4 as y,a5 as N}from"./CartesianChart-Blajmcsg.js";import{L as F,a as k}from"./LineChart-D9C3WqaZ.js";import{B as v,c as M}from"./BarChart-DRQnWTe0.js";import{f as a}from"./format-C2sziSDG.js";import"./proxy-CbQpuZ5T.js";import"./createLucideIcon-Ci57Z1nb.js";import"./users-BhyyQbJ9.js";import"./shield-Bj6jb4oM.js";import"./file-text-PMWQp7tq.js";import"./search-CVggSWwQ.js";import"./user-C97Zk_aQ.js";import"./chevron-down-mH0Ii3G_.js";import"./index-B8-Zcyzl.js";import"./settings-hZB-BaSU.js";import"./use-appearance-B35erkEd.js";import"./utils-CBfrqCZ4.js";import"./typeof-QjJsDpFa.js";import"./jspdf.plugin.autotable-CZ1gY-nI.js";import"./index-c1zC8zW2.js";import"./with-selector-N-_QLJk-.js";import"./index-B4gP1Yw4.js";import"./index-CnyDuYXe.js";import"./tiny-invariant-BaFNuDhB.js";import"./en-US-CT0ADQGI.js";function nt({analytics_data:b}){const o=x.useRef(null),i=x.useRef(null),{total_syncs:l=0,total_users:n=0,total_groups:m=0,user_registrations:c=[],group_creations:d=[]}=b||{},w=async()=>{try{const e=o.current?await h(o.current):null,p=i.current?await h(i.current):null;await R({fileName:`analytics-report-${a(new Date,"yyyy-MM-dd")}.pdf`,reportTitle:"Analytics Report",tables:[{title:"Summary Statistics",head:[["Metric","Value"]],body:[["Total Users",n],["Total Groups",m],["Total Syncs",l]]},{title:"User Registration Data",head:[["Date","New Users"]],body:c.map(s=>[a(new Date(s.date),"PPP"),s.count])},{title:"Group Creation Data",head:[["Date","New Groups"]],body:d.map(s=>[a(new Date(s.date),"PPP"),s.count])}],charts:[...e?[{title:"User Registration Trend",imageData:e,width:180,height:100}]:[],...p?[{title:"Group Creation Trend",imageData:p,width:180,height:100}]:[]]})}catch(e){console.error("Error exporting PDF:",e),alert("Failed to generate PDF report. Please try again.")}};return t.jsxs(P,{children:[t.jsx(D,{title:"Analytics"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analytics"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"System performance and usage statistics"})]}),t.jsxs(C,{onClick:w,variant:"outline",size:"sm",children:[t.jsx(T,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsxs(r,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Users"}),t.jsx("p",{className:"text-3xl font-bold",children:n.toLocaleString()})]}),t.jsxs(r,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Groups"}),t.jsx("p",{className:"text-3xl font-bold",children:m.toLocaleString()})]}),t.jsxs(r,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Syncs"}),t.jsx("p",{className:"text-3xl font-bold",children:l.toLocaleString()})]})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs(r,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"User Registrations"}),t.jsx("div",{ref:o,className:"h-[300px]",children:t.jsx(j,{width:"100%",height:"100%",children:t.jsxs(F,{data:c,children:[t.jsx(g,{strokeDasharray:"3 3"}),t.jsx(u,{dataKey:"date",tickFormatter:e=>a(new Date(e),"MMM d")}),t.jsx(f,{}),t.jsx(y,{labelFormatter:e=>a(new Date(e),"PPP")}),t.jsx(N,{}),t.jsx(k,{type:"monotone",dataKey:"count",name:"New Users",stroke:"rgb(0, 136, 122)",strokeWidth:2})]})})})]}),t.jsxs(r,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Group Creations"}),t.jsx("div",{ref:i,className:"h-[300px]",children:t.jsx(j,{width:"100%",height:"100%",children:t.jsxs(v,{data:d,children:[t.jsx(g,{strokeDasharray:"3 3"}),t.jsx(u,{dataKey:"date",tickFormatter:e=>a(new Date(e),"MMM d")}),t.jsx(f,{}),t.jsx(y,{labelFormatter:e=>a(new Date(e),"PPP")}),t.jsx(N,{}),t.jsx(M,{dataKey:"count",name:"New Groups",fill:"rgb(0, 136, 122)"})]})})})]})]})]})]})}export{nt as default};
