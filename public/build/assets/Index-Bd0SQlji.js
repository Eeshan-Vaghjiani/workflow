import{j as e,r as d,a as N,$ as g}from"./app-Bpl7UGUW.js";import{A as b}from"./app-layout-BVbkYQEz.js";import{B as x}from"./button-nI1-8HXs.js";import{e as y,C as v,a as w,b as C,c as P,d as S}from"./card-CzKFM-Bc.js";import{B as A}from"./badge-BWiLS6G8.js";import{C as h}from"./check-CIZ-Ep7I.js";import{D as I,a as _,b as D,c as B,d as L,e as M}from"./dialog-CbTZdYFt.js";import{I as k}from"./input-CQiJ7d6K.js";import{L as F}from"./label-Djyhicxk.js";import{S as z}from"./shopping-bag-D07cFb94.js";import{P as E}from"./PromptCounter-CLalqQIM.js";import{A as R}from"./arrow-left-D30Se4B-.js";import{S as Y}from"./app-sidebar-layout-3CLlJw7C.js";import"./index-BO9oOdSc.js";import"./proxy-BZsCD5Dk.js";import"./utils-CBfrqCZ4.js";import"./createLucideIcon-rZimPHd5.js";import"./transition-BomkeFJT.js";import"./with-selector-DzyJ0qSI.js";import"./index-DktHM2-i.js";import"./x-BXtlWql6.js";import"./progress-PhgrC8eO.js";import"./lightbulb-BjxSqWv7.js";import"./index-D71eR4x0.js";import"./dropdown-menu-fbT6E9Fk.js";import"./index-DH-cxLSN.js";import"./index-CMRx08MW.js";import"./index-Ct9M_J9d.js";import"./avatar-B2MfT7TY.js";import"./index-DNoKO7hz.js";import"./use-animation-l8PqFNwu.js";import"./use-animation-B-tVBdbv.js";import"./chevron-right-DNIHTrhx.js";import"./users-UITC1FaJ.js";import"./square-check-big-B0Q9VKGE.js";import"./calendar-BpKIoVUT.js";import"./credit-card-DNKN2izi.js";import"./user-CnsbQcIt.js";import"./use-appearance-DBkYCLhm.js";import"./sun-Bv7wBj0o.js";import"./settings-GAq3FU_8.js";import"./glass-container-CJ4c02pk.js";function H({package:s,userPromptsRemaining:t,onSelectPackage:r,isLoading:o=!1}){return e.jsxs(y,{className:`flex flex-col border-2 ${s.is_popular?"border-primary shadow-lg":"border-border"}`,children:[e.jsxs(v,{className:"flex flex-col space-y-1.5",children:[s.is_popular&&e.jsx(A,{className:"w-fit mb-2",variant:"default",children:"Most Popular"}),e.jsx(w,{className:"text-2xl font-bold",children:s.name}),e.jsx(C,{className:"text-sm",children:s.description})]}),e.jsxs(P,{className:"flex-1",children:[e.jsx("div",{className:"flex items-baseline mb-4",children:e.jsxs("span",{className:"text-3xl font-bold",children:[s.currency," ",s.price.toLocaleString()]})}),e.jsxs("div",{className:"text-lg font-semibold mb-2",children:[s.prompts_count.toLocaleString()," AI Prompts"]}),e.jsx("ul",{className:"space-y-2 mt-4",children:s.features.map((a,l)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx("span",{className:"text-sm",children:a})]},l))})]}),e.jsx(S,{children:e.jsx(x,{className:"w-full",size:"lg",variant:s.is_popular?"default":"outline",disabled:o,onClick:()=>r(s),children:o?"Processing...":"Select Package"})})]})}function W({open:s,onOpenChange:t,selectedPackage:r,onPurchaseComplete:o}){const[a,l]=d.useState(""),[n,p]=d.useState(!1),[i,u]=d.useState(null),j=async m=>{if(m.preventDefault(),!!r){p(!0),u(null);try{const c={package_id:r.id,phone_number:a},f=await N.post("/api/pricing/purchase",c);f.data.success?(o(),t(!1)):u(f.data.error||"Failed to process payment")}catch(c){u(c.response?.data?.error||"An error occurred during payment")}finally{p(!1)}}};return r?e.jsx(I,{open:s,onOpenChange:t,children:e.jsxs(_,{className:"sm:max-w-md",children:[e.jsxs(D,{children:[e.jsx("div",{className:"mx-auto bg-primary/10 p-3 rounded-full mb-4",children:e.jsx(z,{className:"h-6 w-6 text-primary"})}),e.jsx(B,{className:"text-center text-xl",children:"Confirm Your Purchase"}),e.jsxs(L,{className:"text-center",children:["You're about to purchase the ",r.name," package"]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-medium",children:r.name}),e.jsxs("span",{className:"font-bold",children:[r.currency," ",r.price.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm",children:[r.prompts_count," AI prompts"]})]}),r.features.slice(0,3).map((m,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm",children:m})]},c))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"phone",children:"M-Pesa Phone Number"}),e.jsx(k,{id:"phone",placeholder:"e.g. 254712345678",value:a,onChange:m=>l(m.target.value),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your M-Pesa registered phone number to complete payment"})]}),i&&e.jsx("div",{className:"text-sm text-destructive",children:i}),e.jsxs(M,{className:"flex flex-col sm:flex-row sm:justify-end gap-2 pt-2",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),e.jsx(x,{type:"submit",disabled:n||!a,children:n?"Processing...":"Confirm Payment"})]})]})]})}):null}function De({packages:s,user:t}){const[r,o]=d.useState(null),[a,l]=d.useState(!1),n=i=>{o(i),l(!0)},p=()=>{window.location.reload()};return e.jsxs(b,{children:[e.jsx(g,{title:"AI Pricing"}),e.jsxs("div",{className:"container max-w-7xl py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Prompts Pricing"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Purchase AI prompts to use our advanced AI features"})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsx(E,{promptsRemaining:t.ai_prompts_remaining,totalPurchased:t.total_prompts_purchased,isPaidUser:t.is_paid_user})})]}),e.jsxs(x,{variant:"ghost",className:"mb-8",onClick:()=>window.history.back(),children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-primary/10 rounded-full mb-4",children:e.jsx(Y,{className:"h-6 w-6 text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Supercharge Your Workflow with AI"}),e.jsx("p",{className:"text-muted-foreground",children:"Our AI tools help you create tasks, optimize schedules, and get personalized study recommendations. Choose the package that's right for you."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(i=>e.jsx(H,{package:i,userPromptsRemaining:t.ai_prompts_remaining,onSelectPackage:n},i.id))}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-6 mt-12",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"What are AI prompts?"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"AI prompts are credits that allow you to use our AI-powered features like task generation, schedule optimization, and study recommendations."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"How long do prompts last?"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Your purchased prompts don't expire and will remain in your account until used."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Can I get a refund?"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"We don't offer refunds for purchased prompts, but we do offer a free trial so you can test our AI features."})]})]})]})]})]}),e.jsx(W,{open:a,onOpenChange:l,selectedPackage:r,onPurchaseComplete:p})]})}export{De as default};
