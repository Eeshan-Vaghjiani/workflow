import{r as o,j as e,$ as F,Y as M,a as h}from"./app-Cz-XC9l4.js";import{A as R}from"./app-layout-DBbC1wJO.js";import{F as P,i as $,a as I,b as L}from"./index-fbfKkC4Z.js";import{e as g,a as f,b as v,c as j}from"./card-tSD26EUH.js";import{u as A}from"./use-toast-LY2u_GWA.js";import{E as y}from"./enhanced-button-eDxsqJ_V.js";import{c as N,i as b}from"./theme-constants-DVo_7dxB.js";import{c as V}from"./utils-CBfrqCZ4.js";import{m as d}from"./proxy-DUnCzY_P.js";import{R as z}from"./refresh-cw-CvPiLkiZ.js";import{C as H}from"./calendar-Cz-eKFtz.js";import{S as W}from"./settings-DpzlEckF.js";import"./app-sidebar-layout-BnpPf58W.js";import"./index-MaZke14b.js";import"./index-BUtF6_nR.js";import"./button-Diu-54fO.js";import"./input-gyYvXWbp.js";import"./dropdown-menu-CMVoGVyb.js";import"./index-B_RcF4Vj.js";import"./index-BlXtbhPC.js";import"./index-BtsonFn7.js";import"./avatar-DLZPR9xF.js";import"./index-CmyQNJFQ.js";import"./createLucideIcon-CfQhLZuM.js";import"./use-animation-CJs_orTr.js";import"./use-animation-CBeboh00.js";import"./chevron-right-BnGLYIXb.js";import"./users-Da4X3jqK.js";import"./square-check-big-Dvy61Sch.js";import"./credit-card-CsbvY-q-.js";import"./user-ILuj1RD-.js";import"./use-appearance-rE9bUEXS.js";import"./sun-C2hnd78D.js";import"./glass-container-qPlEyThK.js";import"./index-B0-ktvjH.js";const Y=[{title:"Dashboard",href:"/dashboard"},{title:"Calendar",href:"/calendar"}];function Se({events:w}){const[c,C]=o.useState(w),[t,S]=o.useState(null),[m,x]=o.useState(!1),{toast:r}=A(),k=o.useRef(null),D=s=>{const i=c.find(n=>n.id===s.event.id);S(i||null)},E=async s=>{const{id:i,start:n,end:u}=s.event;try{const a=n?new Date(n).toISOString().split("T")[0]:"",p=u?new Date(u).toISOString().split("T")[0]:a;await h.put(`/api/tasks/${i}`,{start_date:a,end_date:p}),C(G=>G.map(l=>l.id===i?{...l,start:a,end:p||a}:l)),r({title:"Event Updated",description:"Task dates have been updated."})}catch(a){console.error("Error updating event:",a),s.revert(),r({title:"Update Failed",description:"Failed to update task dates. Please try again.",variant:"destructive"})}},T=async()=>{x(!0);try{await h.post("/api/calendar/sync"),r({title:"Calendar Synced",description:"Your tasks have been synchronized with Google Calendar."})}catch(s){console.error("Error syncing with Google Calendar:",s),r({title:"Sync Failed",description:"Failed to sync with Google Calendar. Please check your connection.",variant:"destructive"})}finally{x(!1)}};return e.jsxs(R,{breadcrumbs:Y,children:[e.jsx(F,{title:"Calendar"}),e.jsx(d.div,{className:"flex h-full flex-1 flex-col gap-6 p-6",variants:N,initial:"hidden",animate:"visible",children:e.jsxs(d.div,{className:"grid grid-cols-1 gap-6 md:grid-cols-4",variants:N,children:[e.jsx(d.div,{className:"col-span-1 md:col-span-3",variants:b,children:e.jsxs(g,{className:"bg-background",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl font-semibold text-foreground",children:"Calendar"}),e.jsx(v,{children:"View and manage your tasks and assignments"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{onClick:T,disabled:m,variant:"secondary",size:"sm",icon:m?e.jsx(z,{className:"h-4 w-4 animate-spin"}):e.jsx(H,{className:"h-4 w-4"}),iconPosition:"left",magnetic:!0,children:"Sync with Google"}),e.jsx(M,{href:route("calendar.settings"),children:e.jsx(y,{variant:"outline",size:"sm",icon:e.jsx(W,{className:"h-4 w-4"}),iconPosition:"left",magnetic:!0,children:"Settings"})})]})]}),e.jsx(j,{className:"p-0",children:e.jsx("div",{className:V("calendar-container","dark:bg-background dark:text-foreground","border-t border-border"),children:e.jsx(P,{ref:k,plugins:[$,I,L],initialView:"dayGridMonth",events:c,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,eventClick:s=>D(s),eventChange:s=>E(s),headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day"},themeSystem:"standard",height:"auto",contentHeight:"auto",aspectRatio:2,expandRows:!0,stickyHeaderDates:!0,nowIndicator:!0,dayHeaders:!0,eventDisplay:"block",eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},slotLabelFormat:{hour:"numeric",minute:"2-digit",hour12:!0},allDaySlot:!0,allDayText:"All Day",slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",slotLabelInterval:"01:00"})})})]})}),e.jsx(d.div,{className:"col-span-1",variants:b,children:e.jsxs(g,{className:"bg-background",children:[e.jsxs("div",{className:"p-6",children:[e.jsx(f,{className:"text-xl font-semibold text-foreground",children:"Event Details"}),e.jsx(v,{children:t?"Selected event information":"Select an event to view details"})]}),e.jsx(j,{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-foreground",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.start).toLocaleDateString()," - ",new Date(t.end).toLocaleDateString()]})]}),t.groupName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Group"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.groupName})]}),t.assignmentTitle&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Assignment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.assignmentTitle})]}),t.priority&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Priority"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.priority})]}),t.status&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.status})]}),t.progress!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Progress"}),e.jsx("div",{className:"h-2 w-full rounded-full bg-secondary",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${t.progress}%`}})}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[t.progress,"% Complete"]})]})]}):e.jsx("p",{className:"text-center text-muted-foreground",children:"No event selected"})})]})})]})})]})}export{Se as default};
