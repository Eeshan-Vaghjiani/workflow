import{r as o,m as i,j as e,$ as C}from"./app-Bpl7UGUW.js";import{a as D}from"./index.module-BZ4WZvTu.js";import{A as k}from"./admin-layout-oQi858Hq.js";import{C as S}from"./card-3d-CcLzNSxw.js";import{B as t}from"./button-nI1-8HXs.js";import{I as T}from"./input-CQiJ7d6K.js";import{B as P}from"./badge-BWiLS6G8.js";import{D as z,a as A,b as R,c as E,d as _,e as B}from"./dialog-CbTZdYFt.js";import{T as F,a as G,b as h,c as n,d as O,e as r}from"./table-8r_zPirJ.js";import{m as x}from"./proxy-BZsCD5Dk.js";import{R as f}from"./refresh-cw-CPmgjJlL.js";import{F as H}from"./file-down-BwgkTUvd.js";import{S as I}from"./search-DQYCoN0I.js";import{E as M}from"./eye-DtZ8XD5r.js";import{P as L}from"./pen-CYYbvy53.js";import{T as V}from"./trash-2-BuTQWlB7.js";import{a as $,C as q}from"./chevron-right-DNIHTrhx.js";import{f as J}from"./format-C2sziSDG.js";import"./createLucideIcon-rZimPHd5.js";import"./users-UITC1FaJ.js";import"./shield-B8OYqYq5.js";import"./file-text-DytWk5N1.js";import"./user-CnsbQcIt.js";import"./chevron-down-DhnFZGDG.js";import"./index-BO9oOdSc.js";import"./settings-GAq3FU_8.js";import"./use-appearance-DBkYCLhm.js";import"./utils-CBfrqCZ4.js";import"./transition-BomkeFJT.js";import"./with-selector-DzyJ0qSI.js";import"./index-DktHM2-i.js";import"./x-BXtlWql6.js";import"./en-US-CT0ADQGI.js";const K={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},Se=({groups:a,filters:c})=>{const[j,v]=o.useState(c?.search||""),[g,l]=o.useState(!1),[d,p]=o.useState(null),[m]=D(j,300);o.useEffect(()=>{m!==(c?.search||"")&&i.get(route("admin.groups.index"),{search:m},{preserveState:!0,replace:!0})},[m,c?.search]);const N=()=>window.location.href=route("admin.groups.pdf"),w=s=>{p(s),l(!0)},b=s=>i.post(route("admin.groups.restore",s.id),{},{preserveScroll:!0}),y=()=>{d&&i.delete(route("admin.groups.destroy",d.id),{onSuccess:()=>{l(!1),p(null)},preserveScroll:!0})};return e.jsxs(k,{children:[e.jsx(C,{title:"Manage Groups"}),e.jsxs(x.div,{variants:K,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(x.div,{variants:u,className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[rgb(17,24,39)] dark:text-white",children:"Manage Groups"}),e.jsx("p",{className:"text-[rgb(75,85,99)] dark:text-[rgb(156,163,175)]",children:"A list of all groups in the system."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(t,{onClick:()=>i.reload(),variant:"outline",size:"sm",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(t,{onClick:N,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]})]}),e.jsx(x.div,{variants:u,children:e.jsxs(S,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(T,{placeholder:"Search by name or owner...",value:j,onChange:s=>v(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"overflow-x-auto rounded-lg border dark:border-gray-700",children:e.jsxs(F,{children:[e.jsx(G,{children:e.jsxs(h,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Owner"}),e.jsx(n,{children:"Members"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Created At"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(O,{children:a.data.length>0?a.data.map(s=>e.jsxs(h,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.owner?.name||"No Owner"}),e.jsx(r,{children:s.members_count}),e.jsx(r,{children:e.jsx(P,{variant:s.deleted_at?"danger":"success",children:s.deleted_at?"Deleted":"Active"})}),e.jsx(r,{children:J(new Date(s.created_at),"PPP")}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>i.visit(route("admin.groups.show",s.id)),children:e.jsx(M,{className:"h-4 w-4"})}),s.deleted_at?e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>b(s),children:e.jsx(f,{className:"h-4 w-4 text-green-500"})}):e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>i.visit(route("admin.groups.edit",s.id)),children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>w(s),children:e.jsx(V,{className:"h-4 w-4 text-red-500"})})]})]})})]},s.id)):e.jsx(h,{children:e.jsx(r,{colSpan:6,className:"text-center py-16",children:"No groups found."})})})]})}),a.total>a.per_page&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",a.data.length," of ",a.total," groups"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(t,{onClick:()=>i.get(a.links[0].url),disabled:!a.links[0].url,variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-1"})," Previous"]}),e.jsxs(t,{onClick:()=>i.get(a.links[a.links.length-1].url),disabled:!a.links[a.links.length-1].url,variant:"outline",size:"sm",children:["Next ",e.jsx(q,{className:"h-4 w-4 ml-1"})]})]})]})]})})]}),e.jsx(z,{open:g,onOpenChange:l,children:e.jsxs(A,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Are you sure?"}),e.jsxs(_,{children:['This will soft delete the group "',d?.name,'". This action can be undone later.']})]}),e.jsxs(B,{children:[e.jsx(t,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(t,{variant:"danger",onClick:y,children:"Delete"})]})]})})]})};export{Se as default};
