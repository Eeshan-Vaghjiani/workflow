import{r as d,m as R,j as e,$ as ne,Y as p}from"./app-Bpl7UGUW.js";import{P as H}from"./placeholder-pattern-ZoXDkvp6.js";import{A as ce}from"./app-layout-BVbkYQEz.js";import{I as oe}from"./input-CQiJ7d6K.js";import{S as Y,a as L,b as O,c as X,d as m}from"./select-BiuN9zSH.js";import{B as g}from"./badge-BWiLS6G8.js";import{C as _,a as A,c as D,b as q,d as J}from"./card-CzKFM-Bc.js";import{_ as de}from"./lodash-Bx0ulGEr.js";import{T as me,a as xe,b as K,c as Q}from"./tabs-i_XIkvZS.js";import{C as I}from"./card-3d-CcLzNSxw.js";import{G as W}from"./glass-container-CJ4c02pk.js";import{E as x}from"./enhanced-button-CoxoAF_G.js";import{c as M,i as j}from"./theme-constants-DVo_7dxB.js";import{m as i}from"./proxy-BZsCD5Dk.js";import{S as ue}from"./search-DQYCoN0I.js";import{X as P}from"./x-BXtlWql6.js";import{C}from"./chevron-up-D-btCEz-.js";import{C as S}from"./chevron-down-DhnFZGDG.js";import{C as Z}from"./calendar-BpKIoVUT.js";import{C as ee}from"./clock-C-Kl2Hq7.js";import{p as b}from"./parseISO-Dmh2dHml.js";import{f as he}from"./format-C2sziSDG.js";import{f as pe}from"./formatDistanceToNow-DzYsKnCe.js";import"./app-sidebar-layout-3CLlJw7C.js";import"./index-D71eR4x0.js";import"./index-DktHM2-i.js";import"./button-nI1-8HXs.js";import"./utils-CBfrqCZ4.js";import"./dropdown-menu-fbT6E9Fk.js";import"./index-DH-cxLSN.js";import"./index-CMRx08MW.js";import"./index-Ct9M_J9d.js";import"./avatar-B2MfT7TY.js";import"./index-DNoKO7hz.js";import"./createLucideIcon-rZimPHd5.js";import"./use-animation-l8PqFNwu.js";import"./use-animation-B-tVBdbv.js";import"./chevron-right-DNIHTrhx.js";import"./users-UITC1FaJ.js";import"./square-check-big-B0Q9VKGE.js";import"./credit-card-DNKN2izi.js";import"./user-CnsbQcIt.js";import"./use-appearance-DBkYCLhm.js";import"./sun-Bv7wBj0o.js";import"./settings-GAq3FU_8.js";import"./index-BO9oOdSc.js";import"./index-BdQq_4o_.js";import"./index-WcHzhB8S.js";import"./check-CIZ-Ep7I.js";import"./en-US-CT0ADQGI.js";import"./endOfMonth-D0QkFyMS.js";import"./endOfDay-yqR91pFr.js";const te=u=>{try{return he(b(u),"dd/MM/yyyy")}catch{return u}},re=u=>{try{const N=b(u),n=new Date,r=Math.abs(N.getTime()-n.getTime());return r<6e4?r<1e3?`${r}ms`:`${Math.floor(r/1e3)}s`:r<36e5?`${Math.floor(r/6e4)}m`:r<864e5?`${Math.floor(r/36e5)}h`:pe(N,{addSuffix:!0})}catch{return"Invalid date"}},ge=[{title:"Assignments",href:"/assignments"}];function gt({assignments:u,userGroups:N,filters:n}){const[r,F]=d.useState(n.search||""),[f,G]=d.useState(n.group_id||"all"),[y,z]=d.useState(n.status||"all"),[l,U]=d.useState(n.sort||"due_date"),[v,$]=d.useState(n.direction||"asc"),[se,ae]=d.useState("uncompleted"),V=de.debounce(t=>{k({search:t})},300);d.useEffect(()=>(V(r),()=>{V.cancel()}),[r]);const k=t=>{const s={...n,...t},c={};Object.keys(s).forEach(a=>{const o=s[a];o&&o!=="all"&&(c[a]=o)}),R.get(route("assignments"),c,{preserveState:!0,replace:!0})},w=t=>{let s="asc";t===l&&(s=v==="asc"?"desc":"asc"),U(t),$(s),k({sort:t,direction:s})},T=()=>{F(""),G("all"),z("all"),U("due_date"),$("asc"),R.get(route("assignments"),{},{preserveState:!0,replace:!0})},E=t=>{switch(t){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"active":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"due":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100";case"archived":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100"}},ie=t=>{const s=new Date,c=b(t),a=Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24));return a<0?"text-red-600 dark:text-red-400 font-semibold":a===0?"text-orange-600 dark:text-orange-400 font-semibold":a<=2?"text-amber-600 dark:text-amber-400":a<=5?"text-yellow-600 dark:text-yellow-400":a<=14?"text-lime-600 dark:text-lime-400":"text-green-600 dark:text-green-400"},B=t=>{const s=new Date,c=b(t.due_date);return Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24))<0?"border-red-500 dark:border-red-600":t.tasks.length>0&&t.tasks.every(le=>le.status==="completed")?"border-green-500 dark:border-green-600":"border-gray-200 dark:border-gray-700"},h=u.map(t=>{const s=new Date,c=b(t.due_date),a=Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24)),o={...t};return o.status==="active"&&a<0&&(o.status="due"),o});return e.jsxs(ce,{breadcrumbs:ge,children:[e.jsx(ne,{title:"Assignments"}),e.jsxs(i.div,{className:"flex h-full flex-1 flex-col gap-6 p-6",variants:M,initial:"hidden",animate:"visible",children:[e.jsxs(i.div,{variants:j,className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Assignments"}),e.jsx(p,{href:route("groups.index"),className:"inline-flex items-center px-4 py-2 bg-primary-600 dark:bg-primary-700 text-white rounded-md font-semibold text-xs tracking-widest transition hover:bg-primary-700 dark:hover:bg-primary-600",children:"Create Assignment"})]}),e.jsx(i.div,{variants:j,children:e.jsxs(I,{className:"p-6",children:[e.jsx(_,{className:"pb-2 px-0 pt-0",children:e.jsx(A,{className:"text-lg text-gray-900 dark:text-white",children:"Filters"})}),e.jsx(D,{className:"px-0 pb-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx(oe,{placeholder:"Search assignments...",value:r,onChange:t=>F(t.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Group"}),e.jsxs(Y,{value:f,onValueChange:t=>{G(t),k({group_id:t})},children:[e.jsx(L,{children:e.jsx(O,{placeholder:"All Groups"})}),e.jsxs(X,{children:[e.jsx(m,{value:"all",children:"All Groups"}),N.map(t=>e.jsx(m,{value:t.id.toString(),children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs(Y,{value:y,onValueChange:t=>{z(t),k({status:t})},children:[e.jsx(L,{children:e.jsx(O,{placeholder:"All Statuses"})}),e.jsxs(X,{children:[e.jsx(m,{value:"all",children:"All Statuses"}),e.jsx(m,{value:"active",children:"Active"}),e.jsx(m,{value:"due",children:"Due"}),e.jsx(m,{value:"completed",children:"Completed"}),e.jsx(m,{value:"archived",children:"Archived"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(x,{variant:"outline",onClick:T,className:"w-full",icon:e.jsx(P,{className:"h-4 w-4"}),iconPosition:"left",magnetic:!0,children:"Reset Filters"})})]})})]})}),e.jsxs(i.div,{variants:j,className:"flex flex-wrap gap-2",children:[e.jsx(x,{variant:l==="due_date"?"primary":"outline",size:"sm",onClick:()=>w("due_date"),className:"flex items-center",icon:l==="due_date"&&(v==="asc"?e.jsx(C,{className:"h-4 w-4"}):e.jsx(S,{className:"h-4 w-4"})),iconPosition:"right",magnetic:!0,children:"Due Date"}),e.jsx(x,{variant:l==="title"?"primary":"outline",size:"sm",onClick:()=>w("title"),className:"flex items-center",icon:l==="title"&&(v==="asc"?e.jsx(C,{className:"h-4 w-4"}):e.jsx(S,{className:"h-4 w-4"})),iconPosition:"right",magnetic:!0,children:"Title"}),e.jsx(x,{variant:l==="created_at"?"primary":"outline",size:"sm",onClick:()=>w("created_at"),className:"flex items-center",icon:l==="created_at"&&(v==="asc"?e.jsx(C,{className:"h-4 w-4"}):e.jsx(S,{className:"h-4 w-4"})),iconPosition:"right",magnetic:!0,children:"Created Date"}),e.jsx(x,{variant:l==="unit_name"?"primary":"outline",size:"sm",onClick:()=>w("unit_name"),className:"flex items-center",icon:l==="unit_name"&&(v==="asc"?e.jsx(C,{className:"h-4 w-4"}):e.jsx(S,{className:"h-4 w-4"})),iconPosition:"right",magnetic:!0,children:"Unit Name"})]}),e.jsx(i.div,{variants:j,children:e.jsxs(me,{defaultValue:se,onValueChange:ae,className:"w-full",children:[e.jsxs(xe,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsxs(K,{value:"uncompleted",children:["Uncompleted Assignments",e.jsx(g,{variant:"outline",className:"ml-2",children:h.filter(t=>t.status!=="completed").length})]}),e.jsxs(K,{value:"completed",children:["Completed Assignments",e.jsx(g,{variant:"outline",className:"ml-2",children:h.filter(t=>t.status==="completed").length})]})]}),e.jsx(Q,{value:"uncompleted",children:h.filter(t=>t.status!=="completed").length>0?e.jsx(i.div,{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",variants:M,children:h.filter(t=>t.status!=="completed").map((t,s)=>e.jsx(i.div,{variants:j,custom:s,whileHover:{y:-5,transition:{duration:.2}},children:e.jsxs(I,{className:`overflow-hidden border-2 ${B(t)}`,children:[e.jsxs(_,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(p,{href:route("group-assignments.show",{group:t.group.id,assignment:t.id}),children:e.jsx(A,{className:"text-lg text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 line-clamp-1",children:t.title})}),e.jsx(g,{className:E(t.status),children:t.status})]}),e.jsx(q,{className:"text-gray-600 dark:text-gray-300",children:t.unit_name||"General"})]}),e.jsxs(D,{className:"pb-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2",children:t.description||"No description"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Z,{className:"mr-1 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:ie(t.due_date),children:te(t.due_date)})]}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(ee,{className:"mr-1 h-4 w-4 text-gray-500 dark:text-gray-400"}),re(t.due_date)]})]})]}),e.jsxs(J,{className:"pt-2 flex justify-between items-center border-t border-gray-200 dark:border-gray-700",children:[e.jsx(p,{href:route("groups.show",t.group.id),className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:t.group.name}),e.jsxs(g,{variant:"outline",children:[t.tasks.length," ",t.tasks.length===1?"task":"tasks"]})]})]})},t.id))}):e.jsxs(W,{className:"min-h-[30vh] flex items-center justify-center overflow-hidden rounded-xl relative",blurIntensity:"sm",children:[e.jsxs(i.div,{className:"text-center z-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"No Uncompleted Assignments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:r||f!=="all"||y!=="all"?"Try adjusting your filters to see more assignments.":"All your assignments are completed. Great job!"}),r||f!=="all"||y!=="all"?e.jsx(x,{onClick:T,variant:"outline",icon:e.jsx(P,{className:"h-4 w-4"}),iconPosition:"left",magnetic:!0,children:"Reset Filters"}):e.jsx(p,{href:route("groups.index"),className:"inline-flex items-center px-4 py-2 bg-primary-600 dark:bg-primary-700 text-white rounded-md font-semibold text-xs tracking-widest transition hover:bg-primary-700 dark:hover:bg-primary-600",children:"Create Assignment"})]}),e.jsx(H,{className:"absolute inset-0 size-full stroke-neutral-900/10 dark:stroke-neutral-100/10"})]})}),e.jsx(Q,{value:"completed",children:h.filter(t=>t.status==="completed").length>0?e.jsx(i.div,{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",variants:M,children:h.filter(t=>t.status==="completed").map((t,s)=>e.jsx(i.div,{variants:j,custom:s,whileHover:{y:-5,transition:{duration:.2}},children:e.jsxs(I,{className:`overflow-hidden border-2 ${B(t)}`,children:[e.jsxs(_,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(p,{href:route("group-assignments.show",{group:t.group.id,assignment:t.id}),children:e.jsx(A,{className:"text-lg text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 line-clamp-1",children:t.title})}),e.jsx(g,{className:E(t.status),children:t.status})]}),e.jsx(q,{className:"text-gray-600 dark:text-gray-300",children:t.unit_name||"General"})]}),e.jsxs(D,{className:"pb-2",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2",children:t.description||"No description"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Z,{className:"mr-1 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("span",{children:te(t.due_date)})]}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-300",children:[e.jsx(ee,{className:"mr-1 h-4 w-4 text-gray-500 dark:text-gray-400"}),re(t.due_date)]})]})]}),e.jsxs(J,{className:"pt-2 flex justify-between items-center border-t border-gray-200 dark:border-gray-700",children:[e.jsx(p,{href:route("groups.show",t.group.id),className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:t.group.name}),e.jsxs(g,{variant:"outline",children:[t.tasks.length," ",t.tasks.length===1?"task":"tasks"]})]})]})},t.id))}):e.jsxs(W,{className:"min-h-[30vh] flex items-center justify-center overflow-hidden rounded-xl relative",blurIntensity:"sm",children:[e.jsxs(i.div,{className:"text-center z-10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"No Completed Assignments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:r||f!=="all"||y!=="all"?"Try adjusting your filters to see more assignments.":"You have not completed any assignments yet."}),(r||f!=="all"||y!=="all")&&e.jsx(x,{onClick:T,variant:"outline",icon:e.jsx(P,{className:"h-4 w-4"}),iconPosition:"left",magnetic:!0,children:"Reset Filters"})]}),e.jsx(H,{className:"absolute inset-0 size-full stroke-neutral-900/10 dark:stroke-neutral-100/10"})]})})]})})]})]})}export{gt as default};
