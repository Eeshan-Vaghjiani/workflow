import{r as n,j as e,a as d,$ as de}from"./app-Cz-XC9l4.js";import{A as oe}from"./app-layout-DBbC1wJO.js";import{B as l}from"./button-Diu-54fO.js";import{e as P,C as A,a as D,b as _,c as F,d as ne}from"./card-tSD26EUH.js";import{I as g}from"./input-gyYvXWbp.js";import{L as x}from"./label-TRCAcQVD.js";import{T as le,a as ce,b as M,c as $}from"./tabs-DEpUcAvz.js";import{C as me}from"./calendar-CpjqwzxS.js";import{S as ue}from"./scroll-area-UkJwdiMs.js";import{P as pe,a as he,b as xe}from"./popover-tRTs676i.js";import{B as fe}from"./badge-DxpFCqhw.js";import{T as ye}from"./textarea-_X4jAbSH.js";import{u as ge}from"./use-toast-LY2u_GWA.js";import{C as R}from"./calendar-Cz-eKFtz.js";import{C as z}from"./circle-check-big-gIZ6yXgA.js";import{T as j}from"./trash-2-DglzZvlY.js";import{C as G}from"./clock-DzskyGux.js";import{B as je}from"./app-sidebar-layout-BnpPf58W.js";import{c as ve}from"./createLucideIcon-CfQhLZuM.js";import{f as v}from"./format-C2sziSDG.js";import{C as we}from"./card-3d-xMNzOEQV.js";import{c as Ne,i as J}from"./theme-constants-DVo_7dxB.js";import{m as B}from"./proxy-DUnCzY_P.js";import"./index-B0-ktvjH.js";import"./utils-CBfrqCZ4.js";import"./index-MaZke14b.js";import"./index-BUtF6_nR.js";import"./dropdown-menu-CMVoGVyb.js";import"./index-B_RcF4Vj.js";import"./index-BlXtbhPC.js";import"./index-BtsonFn7.js";import"./avatar-DLZPR9xF.js";import"./index-CmyQNJFQ.js";import"./en-US-CT0ADQGI.js";import"./setYear-Dg_Q6WC1.js";import"./endOfMonth-D0QkFyMS.js";import"./chevron-right-BnGLYIXb.js";import"./index-BdQq_4o_.js";import"./use-animation-CJs_orTr.js";import"./use-animation-CBeboh00.js";import"./users-Da4X3jqK.js";import"./square-check-big-Dvy61Sch.js";import"./credit-card-CsbvY-q-.js";import"./user-ILuj1RD-.js";import"./use-appearance-rE9bUEXS.js";import"./sun-C2hnd78D.js";import"./settings-DpzlEckF.js";import"./glass-container-qPlEyThK.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],be=ve("CirclePlus",Se),Te=({userId:w})=>{const[Q,Z]=n.useState("upcoming"),[f,ee]=n.useState(new Date),[L,te]=n.useState("09:00"),[V,se]=n.useState("10:00"),[N,S]=n.useState(""),[I,b]=n.useState(""),[c,u]=n.useState([]),[T,y]=n.useState(!1),[k,C]=n.useState(""),[m,p]=n.useState([]),[ae,E]=n.useState(!0),{toast:o}=ge(),h=()=>{d.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",d.defaults.withCredentials=!0};n.useEffect(()=>{(async()=>{E(!0),h();try{try{const s=await d.get("/api/web/study-sessions");s.data&&u(s.data.map(a=>({id:a.id.toString(),title:a.title,description:a.description,date:new Date(a.session_date),startTime:a.start_time,endTime:a.end_time,completed:a.completed})))}catch(s){console.error("API endpoint for sessions failed, trying direct web route:",s);const a=await d.get("/study-sessions");a.data&&u(a.data.map(r=>({id:r.id.toString(),title:r.title,description:r.description,date:new Date(r.session_date),startTime:r.start_time,endTime:r.end_time,completed:r.completed})))}try{const s=await d.get("/api/web/study-tasks");s.data&&p(s.data.map(a=>({id:a.id.toString(),title:a.title,completed:a.completed})))}catch(s){console.error("API endpoint for tasks failed, trying direct web route:",s);const a=await d.get("/study-tasks");a.data&&p(a.data.map(r=>({id:r.id.toString(),title:r.title,completed:r.completed})))}E(!1)}catch(s){console.error("Error fetching study data:",s),E(!1),o({title:"Error",description:"Failed to load your study data. Please try refreshing the page.",variant:"destructive"})}})()},[w]);const re=async()=>{if(!N){o({title:"Error",description:"Please enter a session title",variant:"destructive"});return}h();const t={title:N,description:I,session_date:v(f,"yyyy-MM-dd"),start_time:L,end_time:V};try{try{const s=await d.post("/api/web/study-sessions",t),a={id:s.data.session.id.toString(),title:s.data.session.title,description:s.data.session.description,date:new Date(s.data.session.session_date),startTime:s.data.session.start_time,endTime:s.data.session.end_time,completed:s.data.session.completed};u([...c,a]),S(""),b(""),y(!1),o({title:"Success",description:"Study session added to your schedule"});return}catch(s){console.error("API endpoint failed, trying direct web route:",s);const a=await d.post("/study-sessions",t),r={id:a.data.session.id.toString(),title:a.data.session.title,description:a.data.session.description,date:new Date(a.data.session.session_date),startTime:a.data.session.start_time,endTime:a.data.session.end_time,completed:a.data.session.completed};u([...c,r]),S(""),b(""),y(!1),o({title:"Success",description:"Study session added to your schedule"})}}catch(s){console.error("Error saving study session:",s),console.error("Error details:",{status:s.response?.status,statusText:s.response?.statusText,data:s.response?.data,headers:s.response?.headers}),o({title:"Error",description:"Failed to save your study session to the server. Please try again.",variant:"destructive"})}},O=async()=>{if(!k.trim())return;h();const t={title:k,description:null,study_session_id:null};try{try{const s=await d.post("/api/web/study-tasks",t),a={id:s.data.task.id.toString(),title:s.data.task.title,completed:s.data.task.completed};p([...m,a]),C(""),o({title:"Success",description:"Task added successfully"});return}catch(s){console.error("API endpoint failed, trying direct web route:",s);const a=await d.post("/study-tasks",t),r={id:a.data.task.id.toString(),title:a.data.task.title,completed:a.data.task.completed};p([...m,r]),C(""),o({title:"Success",description:"Task added successfully"})}}catch(s){console.error("Error saving study task:",s),console.error("Error details:",{status:s.response?.status,statusText:s.response?.statusText,data:s.response?.data,headers:s.response?.headers}),o({title:"Error",description:"Failed to save your task to the server. Please try again.",variant:"destructive"})}},U=async t=>{const s=m.find(i=>i.id===t);if(!s)return;const a=!s.completed,r=m.map(i=>i.id===t?{...i,completed:a}:i);p(r),h();try{try{await d.put(`/api/web/study-tasks/${t}`,{completed:a});return}catch(i){console.error("API endpoint failed, trying direct web route:",i),await d.put(`/study-tasks/${t}`,{completed:a})}}catch(i){console.error("Error updating task completion status:",i),p(m),o({title:"Error",description:"Failed to update task status. Please try again.",variant:"destructive"})}},H=async t=>{if(!confirm("Are you sure you want to delete this task?"))return;const s=m.filter(a=>a.id!==t);p(s),h();try{try{await d.delete(`/api/web/study-tasks/${t}`),o({title:"Success",description:"Task deleted successfully"});return}catch(a){console.error("API endpoint failed, trying direct web route:",a),await d.delete(`/study-tasks/${t}`),o({title:"Success",description:"Task deleted successfully"})}}catch(a){console.error("Error deleting task:",a),p(m),o({title:"Error",description:"Failed to delete task. Please try again.",variant:"destructive"})}},ie=async t=>{const s=c.find(i=>i.id===t);if(!s)return;const a=!s.completed,r=c.map(i=>i.id===t?{...i,completed:a}:i);u(r),h();try{try{await d.put(`/api/web/study-sessions/${t}`,{completed:a});return}catch(i){console.error("API endpoint failed, trying direct web route:",i),await d.put(`/study-sessions/${t}`,{completed:a})}}catch(i){console.error("Error updating session completion status:",i),u(c),o({title:"Error",description:"Failed to update session status. Please try again.",variant:"destructive"})}},K=async t=>{if(!confirm("Are you sure you want to delete this study session?"))return;const s=c.filter(a=>a.id!==t);u(s),h();try{try{await d.delete(`/api/web/study-sessions/${t}`),o({title:"Success",description:"Study session deleted successfully"});return}catch(a){console.error("API endpoint failed, trying direct web route:",a),await d.delete(`/study-sessions/${t}`),o({title:"Success",description:"Study session deleted successfully"})}}catch(a){console.error("Error deleting session:",a),u(c),o({title:"Error",description:"Failed to delete study session. Please try again.",variant:"destructive"})}},Y=c.filter(t=>!t.completed&&t.date>=new Date(new Date().setHours(0,0,0,0))).sort((t,s)=>t.date.getTime()-s.date.getTime()),q=c.filter(t=>t.completed).sort((t,s)=>s.date.getTime()-t.date.getTime()),W=m.filter(t=>!t.completed),X=m.filter(t=>t.completed);return ae?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-lg text-gray-700",children:"Loading study planner..."})]}):e.jsx("div",{className:"w-full",children:e.jsxs(le,{defaultValue:"upcoming",value:Q,onValueChange:Z,children:[e.jsxs(ce,{className:"grid w-full grid-cols-3",children:[e.jsx(M,{value:"upcoming",children:"Upcoming Sessions"}),e.jsx(M,{value:"completed",children:"Completed"}),e.jsx(M,{value:"tasks",children:"Study Tasks"})]}),e.jsxs($,{value:"upcoming",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Upcoming Study Sessions"}),e.jsx(l,{onClick:()=>y(!T),children:T?"Cancel":"Add Session"})]}),T&&e.jsxs(P,{children:[e.jsxs(A,{children:[e.jsx(D,{children:"Add New Study Session"}),e.jsx(_,{children:"Schedule a focused study session"})]}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"session-title",children:"Session Title"}),e.jsx(g,{id:"session-title",placeholder:"E.g., Math Review",value:N,onChange:t=>S(t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"session-description",children:"Description (Optional)"}),e.jsx(ye,{id:"session-description",placeholder:"What will you study?",value:I,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Date"}),e.jsxs(pe,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),f?v(f,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(xe,{className:"w-auto p-0",children:e.jsx(me,{mode:"single",selected:f,onSelect:t=>t&&ee(t),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Start Time"}),e.jsx(g,{type:"time",value:L,onChange:t=>te(t.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"End Time"}),e.jsx(g,{type:"time",value:V,onChange:t=>se(t.target.value),className:"w-full"})]})]})]}),e.jsx(ne,{children:e.jsx(l,{onClick:re,className:"w-full",children:"Add Study Session"})})]}),Y.length>0?e.jsx("div",{className:"grid gap-4",children:Y.map(t=>e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),e.jsxs(A,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(D,{children:t.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>ie(t.id),children:e.jsx(z,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>K(t.id),children:e.jsx(j,{className:"h-5 w-5 text-muted-foreground"})})]})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:v(t.date,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.startTime," - ",t.endTime]})]})]})]}),t.description&&e.jsx(F,{children:e.jsx("p",{className:"text-sm",children:t.description})})]},t.id))}):e.jsxs("div",{className:"text-center p-12 border border-dashed rounded-md",children:[e.jsx(je,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Upcoming Sessions"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Plan your study sessions to stay on track with your learning goals."}),e.jsxs(l,{className:"mt-4",onClick:()=>y(!0),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Add Your First Session"]})]})]}),e.jsx($,{value:"completed",children:q.length>0?e.jsx(ue,{className:"h-[600px] rounded-md",children:e.jsx("div",{className:"grid gap-4 p-4",children:q.map(t=>e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),e.jsx(A,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(D,{className:"flex items-center",children:[t.title,e.jsx(fe,{variant:"outline",className:"ml-2 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:"Completed"})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:v(t.date,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.startTime," - ",t.endTime]})]})]})]}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>K(t.id),children:e.jsx(j,{className:"h-5 w-5 text-muted-foreground"})})]})}),t.description&&e.jsx(F,{children:e.jsx("p",{className:"text-sm",children:t.description})})]},t.id))})}):e.jsxs("div",{className:"text-center p-12 border border-dashed rounded-md",children:[e.jsx(z,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Completed Sessions Yet"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Complete your study sessions to see them here."})]})}),e.jsx($,{value:"tasks",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(x,{htmlFor:"task",children:"Add Study Task"}),e.jsx(g,{id:"task",placeholder:"Enter a task...",value:k,onChange:t=>C(t.target.value),onKeyDown:t=>t.key==="Enter"&&O()})]}),e.jsx(l,{onClick:O,children:"Add"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Active Tasks"}),W.length>0?e.jsx("div",{className:"space-y-2",children:W.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(t.id),className:"rounded-full border border-muted-foreground/20 size-5 flex items-center justify-center hover:bg-muted-foreground/5"}),e.jsx("span",{children:t.title})]}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>H(t.id),children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})})]},t.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active tasks"})]}),X.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Completed Tasks"}),e.jsx("div",{className:"space-y-2",children:X.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(t.id),className:"rounded-full bg-green-500 text-white size-5 flex items-center justify-center hover:bg-green-600",children:e.jsx(z,{className:"h-3 w-3"})}),e.jsx("span",{className:"line-through text-muted-foreground",children:t.title})]}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>H(t.id),children:e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})})]},t.id))})]})]})]})})]})})},ke=[{title:"Dashboard",href:"/dashboard"},{title:"Study Planner",href:"/study-planner"}];function wt({userId:w}){return e.jsxs(oe,{breadcrumbs:ke,children:[e.jsx(de,{title:"Study Planner"}),e.jsx(B.div,{className:"flex h-full flex-1 flex-col gap-6 p-6",variants:Ne,initial:"hidden",animate:"visible",children:e.jsx(B.div,{variants:J,children:e.jsxs(we,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Study Planner"})}),e.jsx(B.div,{variants:J,className:"w-full",children:e.jsx(Te,{userId:w})})]})})})]})}export{wt as default};
