import{j as e,Y as x,r as u,$ as I,m as p}from"./app-Bpl7UGUW.js";import{A as B}from"./admin-layout-oQi858Hq.js";import{B as a}from"./button-nI1-8HXs.js";import{I as L}from"./input-CQiJ7d6K.js";import{B as h}from"./badge-BWiLS6G8.js";import{e as N,C as q,a as P,c as g}from"./card-CzKFM-Bc.js";import{T as k,a as F,b as f,c as n,d as H,e as l}from"./table-8r_zPirJ.js";import{a as C,C as b}from"./chevron-right-DNIHTrhx.js";import{E as M}from"./ellipsis-A1UafX3t.js";import{D as y,g as D,a as w,b as S,c as T}from"./dialog-CbTZdYFt.js";import{D as O}from"./download-l-QaKqVU.js";import{S as $}from"./search-DQYCoN0I.js";import{F as Y}from"./file-text-DytWk5N1.js";import{E as G}from"./eye-DtZ8XD5r.js";import{S as U}from"./square-pen-TdpES6FY.js";import{T as V}from"./trash-2-BuTQWlB7.js";import{R as J}from"./rotate-ccw-DM9OvxaP.js";import"./proxy-BZsCD5Dk.js";import"./createLucideIcon-rZimPHd5.js";import"./users-UITC1FaJ.js";import"./shield-B8OYqYq5.js";import"./user-CnsbQcIt.js";import"./chevron-down-DhnFZGDG.js";import"./index-BO9oOdSc.js";import"./settings-GAq3FU_8.js";import"./use-appearance-DBkYCLhm.js";import"./utils-CBfrqCZ4.js";import"./transition-BomkeFJT.js";import"./with-selector-DzyJ0qSI.js";import"./index-DktHM2-i.js";import"./x-BXtlWql6.js";const K=({links:t})=>{const j=t.filter(r=>r.label!=="&laquo; Previous"&&r.label!=="Next &raquo;"),i=t.find(r=>r.label==="&laquo; Previous"),c=t.find(r=>r.label==="Next &raquo;");return e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(a,{variant:"outline",size:"icon",disabled:!i?.url,asChild:!!i?.url,children:i?.url?e.jsx(x,{href:i.url,children:e.jsx(C,{className:"h-4 w-4"})}):e.jsx("span",{children:e.jsx(C,{className:"h-4 w-4"})})}),j.map((r,d)=>r.label==="..."?e.jsx(a,{variant:"outline",size:"icon",disabled:!0,className:"cursor-default",children:e.jsx(M,{className:"h-4 w-4"})},`ellipsis-${d}`):r.url?e.jsx(a,{variant:r.active?"default":"outline",size:"icon",asChild:!r.active,children:r.active?e.jsx("span",{children:r.label}):e.jsx(x,{href:r.url,children:r.label})},r.label):null),e.jsx(a,{variant:"outline",size:"icon",disabled:!c?.url,asChild:!!c?.url,children:c?.url?e.jsx(x,{href:c.url,children:e.jsx(b,{className:"h-4 w-4"})}):e.jsx("span",{children:e.jsx(b,{className:"h-4 w-4"})})})]})},Ae=({assignments:t,filters:j})=>{const[i,c]=u.useState(j.search||""),[r,d]=u.useState(null),[A,m]=u.useState(null),R=s=>{s.preventDefault(),p.get(route("admin.assignments.index"),{search:i},{preserveState:!0,replace:!0})},_=s=>{p.delete(route("admin.assignments.destroy",s),{onSuccess:()=>{d(null)}})},z=s=>{p.post(route("admin.assignments.restore",s),{},{onSuccess:()=>{m(null)}})},E=s=>{if(!s)return null;const o=new Date,v=new Date(s);return v<o?e.jsx(h,{variant:"destructive",children:"Overdue"}):Math.ceil((v.getTime()-o.getTime())/(1e3*60*60*24))<=3?e.jsx(h,{variant:"warning",children:"Due soon"}):e.jsx(h,{variant:"outline",children:"Upcoming"})};return e.jsxs(B,{children:[e.jsx(I,{title:"Assignments Management"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Assignments Management"}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(x,{href:route("admin.assignments.pdf"),children:e.jsxs(a,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Export PDF"]})})})]}),e.jsxs(N,{className:"mb-6",children:[e.jsx(q,{className:"pb-3",children:e.jsx(P,{children:"Search Assignments"})}),e.jsx(g,{children:e.jsxs("form",{onSubmit:R,className:"flex gap-2",children:[e.jsx(L,{placeholder:"Search by title, description or group...",value:i,onChange:s=>c(s.target.value),className:"flex-1"}),e.jsxs(a,{type:"submit",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Search"]})]})})]}),e.jsx(N,{children:e.jsx(g,{className:"p-0",children:e.jsxs(k,{children:[e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(n,{children:"Title"}),e.jsx(n,{children:"Group"}),e.jsx(n,{children:"Created By"}),e.jsx(n,{children:"Due Date"}),e.jsx(n,{children:"Tasks"}),e.jsx(n,{children:"Status"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(H,{children:t.data.length===0?e.jsx(f,{children:e.jsx(l,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No assignments found"})}):t.data.map(s=>e.jsxs(f,{className:s.deleted_at?"bg-red-50":"",children:[e.jsx(l,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:s.deleted_at?"line-through text-gray-500":"",children:s.title})]})}),e.jsx(l,{children:s.group?.name||"N/A"}),e.jsx(l,{children:s.created_by?.name||"N/A"}),e.jsx(l,{children:s.due_date?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:new Date(s.due_date).toLocaleDateString()}),e.jsx("span",{className:"text-xs text-gray-500",children:E(s.due_date)})]}):"No due date"}),e.jsx(l,{children:e.jsx(h,{variant:"secondary",children:s.tasks_count})}),e.jsx(l,{children:s.deleted_at?e.jsx(h,{variant:"destructive",children:"Deleted"}):e.jsx(h,{variant:"success",children:"Active"})}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{href:route("admin.assignments.show",s.id),children:e.jsx(a,{variant:"ghost",size:"icon",title:"View",children:e.jsx(G,{className:"h-4 w-4"})})}),!s.deleted_at&&e.jsxs(e.Fragment,{children:[e.jsx(x,{href:route("admin.assignments.edit",s.id),children:e.jsx(a,{variant:"ghost",size:"icon",title:"Edit",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs(y,{open:r===s.id,onOpenChange:o=>!o&&d(null),children:[e.jsx(D,{asChild:!0,children:e.jsx(a,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",title:"Delete",onClick:()=>d(s.id),children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(T,{children:"Confirm Deletion"})}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{children:"Are you sure you want to delete this assignment?"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will soft delete the assignment and it can be restored later."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>d(null),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:()=>_(s.id),children:"Delete"})]})]})]})]}),s.deleted_at&&e.jsxs(y,{open:A===s.id,onOpenChange:o=>!o&&m(null),children:[e.jsx(D,{asChild:!0,children:e.jsx(a,{variant:"ghost",size:"icon",className:"text-green-500 hover:text-green-700 hover:bg-green-50",title:"Restore",onClick:()=>m(s.id),children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(T,{children:"Confirm Restoration"})}),e.jsx("div",{className:"py-4",children:e.jsx("p",{children:"Are you sure you want to restore this assignment?"})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",onClick:()=>m(null),children:"Cancel"}),e.jsx(a,{variant:"default",onClick:()=>z(s.id),children:"Restore"})]})]})]})]})})]},s.id))})]})})}),t.links&&t.links.length>3&&e.jsx("div",{className:"mt-4",children:e.jsx(K,{links:t.links})})]})]})};export{Ae as default};
