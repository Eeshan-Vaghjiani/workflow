import{r as o,m as K,j as e,$ as je,Y as S,g as fe,a as be}from"./app-EFdNlzF1.js";import{P as W}from"./placeholder-pattern-CVHCXO0d.js";import{A as ve}from"./app-layout-0nbQuyMj.js";import{I as ye}from"./input-Bk2B3GPX.js";import{E as i}from"./enhanced-button-Cpx_gIDB.js";import{S as _,a as A,b as D,c as I,d as a}from"./select-CviYm_Zl.js";import{B as p}from"./badge-DBoevtvU.js";import{C as J,a as M,b as Q,c as Z,d as ee}from"./card-BCz-9kZc.js";import{C as se}from"./card-3d-Bo48T8xr.js";import{G as te}from"./glass-container-DKPWOAO6.js";import{_ as Ne}from"./lodash-DmVT5yRs.js";import{S as we}from"./switch-By1q18xv.js";import{L as ke}from"./label-DfE6wHIx.js";import{T as Ce,a as Te,b as re,c as ae}from"./tabs-DKXeolN6.js";import{t as le}from"./use-toast-CANIoCn8.js";import{m as n}from"./proxy-CbQpuZ5T.js";import{S as Se}from"./search-CVggSWwQ.js";import{X as E}from"./x-DQ3PVJ98.js";import{C as w}from"./chevron-up-R-BiXG1L.js";import{C as k}from"./chevron-down-mH0Ii3G_.js";import{A as ie}from"./index-B8-Zcyzl.js";import{C as ne}from"./calendar-BAuuk18F.js";import{C as oe}from"./clock-K7GPj85x.js";import{p as G}from"./parseISO-Dmh2dHml.js";import{f as _e}from"./format-C2sziSDG.js";import{f as Ae}from"./formatDistanceToNow-DzYsKnCe.js";import"./app-sidebar-layout-2N2f9zf2.js";import"./index-DZoa35Y7.js";import"./index-c1zC8zW2.js";import"./button-CasVOQbR.js";import"./utils-CBfrqCZ4.js";import"./dropdown-menu-Be5dVAII.js";import"./index-W8SXwZza.js";import"./index-z8h15STC.js";import"./index-CXYmmwmY.js";import"./avatar-DTxGSWKN.js";import"./index-B4gP1Yw4.js";import"./createLucideIcon-Ci57Z1nb.js";import"./use-animation-WpyryXH0.js";import"./use-animation-BzGI8ib-.js";import"./chevron-right-BAVANYz7.js";import"./users-BhyyQbJ9.js";import"./square-check-big-DO1D6uu6.js";import"./credit-card-BbHoo0vm.js";import"./user-C97Zk_aQ.js";import"./use-appearance-B35erkEd.js";import"./sun-Dv7cDcCR.js";import"./settings-hZB-BaSU.js";import"./index-BdQq_4o_.js";import"./index-zOOosw34.js";import"./check-CMJzhu6p.js";import"./en-US-CT0ADQGI.js";import"./endOfMonth-D0QkFyMS.js";import"./endOfDay-yqR91pFr.js";const ce=m=>{try{return _e(G(m),"dd/MM/yyyy")}catch{return m}},de=m=>{try{const C=G(m),V=new Date,t=Math.abs(C.getTime()-V.getTime());return t<6e4?t<1e3?`${t}ms`:`${Math.floor(t/1e3)}s`:t<36e5?`${Math.floor(t/6e4)}m`:t<864e5?`${Math.floor(t/36e5)}h`:Ae(C,{addSuffix:!0})}catch{return"Invalid date"}},De=[{title:"My Tasks",href:"/group-tasks"}],z={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,when:"beforeChildren"}}},d={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:15}}};function Is({tasks:m,assignments:C,userGroups:V,filters:t}){const[x,R]=o.useState(t.search||""),[j,$]=o.useState(t.assignment_id||"all"),[f,L]=o.useState(t.group_id||"all"),[b,H]=o.useState(t.status||"all"),[v,U]=o.useState(t.priority||"all"),[l,X]=o.useState(t.sort||"end_date"),[u,B]=o.useState(t.direction||"asc"),[y,O]=o.useState(t.view_all==="true"),[me,xe]=o.useState("uncompleted"),g=Array.isArray(m)?m:[],he=async s=>{try{const r=fe();await be.post(`/tasks/${s}/complete`,{},{headers:{"X-CSRF-TOKEN":r,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),le({title:"Task completed",description:"The task has been marked as complete."}),window.location.reload()}catch(r){console.error("Error completing task:",r),le({title:"Error",description:"Failed to complete the task. Please try again.",variant:"destructive"})}},Y=Ne.debounce(s=>{h({search:s})},300);o.useEffect(()=>(Y(x),()=>{Y.cancel()}),[x]);const h=s=>{const r={...t,...s},T={};Object.keys(r).forEach(c=>{const P=r[c];P&&P!=="all"&&(T[c]=P)}),K.get(route("group-tasks.index"),T,{preserveState:!0,replace:!0})},N=s=>{let r="asc";s===l&&(r=u==="asc"?"desc":"asc"),X(s),B(r),h({sort:s,direction:r})},F=()=>{R(""),$("all"),L("all"),H("all"),U("all"),X("end_date"),B("asc"),O(!1),K.get(route("group-tasks.index"),{},{preserveState:!0,replace:!0})},pe=()=>{const s=!y;O(s),h({view_all:s?"true":"false"})},q=s=>{switch(s){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100"}},ue=s=>{switch(s){case"high":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100";case"medium":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-100";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100"}},ge=s=>{const r=new Date,T=G(s),c=Math.ceil((T.getTime()-r.getTime())/(1e3*60*60*24));return c<0?"text-red-600 dark:text-red-400 font-semibold":c===0?"text-orange-600 dark:text-orange-400 font-semibold":c<=2?"text-amber-600 dark:text-amber-400":c<=5?"text-yellow-600 dark:text-yellow-400":c<=14?"text-lime-600 dark:text-lime-400":"text-green-600 dark:text-green-400"};return e.jsxs(ve,{breadcrumbs:De,children:[e.jsx(je,{title:y?"All Tasks":"My Tasks"}),e.jsxs(n.div,{className:"flex h-full flex-1 flex-col gap-4 p-4",variants:z,initial:"hidden",animate:"visible",children:[e.jsxs(n.div,{className:"flex justify-between items-center mb-4",variants:d,children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 dark:from-primary-400 dark:to-neon-green bg-clip-text text-transparent",children:y?"All Tasks":"My Tasks"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(we,{id:"view-all-tasks",checked:y,onCheckedChange:pe}),e.jsx(ke,{htmlFor:"view-all-tasks",className:"text-sm",children:y?"Viewing all tasks":"Viewing my tasks"})]}),e.jsx(S,{href:route("group-tasks.create"),children:e.jsx(i,{variant:"glow",children:"Create Task"})})]})]}),e.jsx(n.div,{variants:d,children:e.jsx(te,{className:"mb-4",blurIntensity:"md",border:!0,children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ye,{placeholder:"Search tasks...",value:x,onChange:s=>R(s.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assignment"}),e.jsxs(_,{value:j,onValueChange:s=>{$(s),h({assignment_id:s})},children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Assignments"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Assignments"}),C.map(s=>e.jsx(a,{value:s.id.toString(),children:s.title},s.id))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Group"}),e.jsxs(_,{value:f,onValueChange:s=>{L(s),h({group_id:s})},children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Groups"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Groups"}),V.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(_,{value:b,onValueChange:s=>{H(s),h({status:s})},children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Statuses"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Statuses"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"in_progress",children:"In Progress"}),e.jsx(a,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs(_,{value:v,onValueChange:s=>{U(s),h({priority:s})},children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Priorities"})}),e.jsxs(I,{children:[e.jsx(a,{value:"all",children:"All Priorities"}),e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"})]})]})]}),e.jsx("div",{className:"md:col-span-3 lg:col-span-5 flex justify-end",children:e.jsxs(i,{variant:"outline",onClick:F,className:"w-full md:w-auto",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Reset Filters"]})})]})]})})}),e.jsxs(n.div,{className:"flex flex-wrap gap-2 mb-4",variants:d,children:[e.jsxs(i,{variant:l==="end_date"?"default":"outline",size:"sm",onClick:()=>N("end_date"),className:"flex items-center",children:["Due Date",l==="end_date"&&(u==="asc"?e.jsx(w,{className:"ml-1 h-4 w-4"}):e.jsx(k,{className:"ml-1 h-4 w-4"}))]}),e.jsxs(i,{variant:l==="title"?"default":"outline",size:"sm",onClick:()=>N("title"),className:"flex items-center",children:["Title",l==="title"&&(u==="asc"?e.jsx(w,{className:"ml-1 h-4 w-4"}):e.jsx(k,{className:"ml-1 h-4 w-4"}))]}),e.jsxs(i,{variant:l==="priority"?"default":"outline",size:"sm",onClick:()=>N("priority"),className:"flex items-center",children:["Priority",l==="priority"&&(u==="asc"?e.jsx(w,{className:"ml-1 h-4 w-4"}):e.jsx(k,{className:"ml-1 h-4 w-4"}))]}),e.jsxs(i,{variant:l==="status"?"default":"outline",size:"sm",onClick:()=>N("status"),className:"flex items-center",children:["Status",l==="status"&&(u==="asc"?e.jsx(w,{className:"ml-1 h-4 w-4"}):e.jsx(k,{className:"ml-1 h-4 w-4"}))]}),e.jsxs(i,{variant:l==="effort_hours"?"default":"outline",size:"sm",onClick:()=>N("effort_hours"),className:"flex items-center",children:["Effort Hours",l==="effort_hours"&&(u==="asc"?e.jsx(w,{className:"ml-1 h-4 w-4"}):e.jsx(k,{className:"ml-1 h-4 w-4"}))]})]}),e.jsx(n.div,{variants:d,children:e.jsx(te,{className:"p-4",blurIntensity:"sm",border:!0,children:e.jsxs(Ce,{defaultValue:me,onValueChange:xe,className:"w-full",children:[e.jsxs(Te,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsxs(re,{value:"uncompleted",children:["Uncompleted Tasks",e.jsx(p,{variant:"outline",className:"ml-2",children:g.filter(s=>s.status!=="completed").length})]}),e.jsxs(re,{value:"completed",children:["Completed Tasks",e.jsx(p,{variant:"outline",className:"ml-2",children:g.filter(s=>s.status==="completed").length})]})]}),e.jsx(ae,{value:"uncompleted",children:e.jsx(ie,{children:g.filter(s=>s.status!=="completed").length>0?e.jsx(n.div,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",variants:z,initial:"hidden",animate:"visible",children:g.filter(s=>s.status!=="completed").map(s=>e.jsx(n.div,{variants:d,children:e.jsxs(se,{intensity:10,className:"h-full",children:[e.jsxs(J,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[s.assignment&&s.assignment.group?e.jsx(S,{href:route("group-tasks.show",{group:s.assignment.group.id,assignment:s.assignment.id,task:s.id}),children:e.jsx(M,{className:"text-lg text-primary-600 hover:text-primary-500 dark:text-neon-green dark:hover:text-primary-400 line-clamp-1",children:s.title})}):e.jsx(M,{className:"text-lg line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{className:ue(s.priority),children:s.priority}),e.jsx(p,{className:q(s.status),children:s.status.replace("_"," ")})]})]}),s.assignment&&e.jsx(Q,{children:s.assignment.title})]}),e.jsxs(Z,{className:"pb-2",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-2",children:s.description||"No description"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ne,{className:"mr-1 h-4 w-4"}),e.jsx("span",{className:ge(s.end_date),children:ce(s.end_date)})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(oe,{className:"mr-1 h-4 w-4"}),de(s.end_date)]})]})]}),e.jsxs(ee,{className:"pt-2 flex justify-between items-center border-t",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.effort_hours," ",s.effort_hours===1?"hour":"hours"]})}),s.assigned_user&&e.jsx(p,{variant:"outline",children:s.assigned_user.name})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(i,{onClick:()=>he(s.id),variant:"glow",className:"w-full",children:"Mark as Complete"})})]})},s.id))}):e.jsxs(n.div,{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[30vh] flex items-center justify-center overflow-hidden rounded-xl border",variants:d,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 bg-gradient-to-r from-primary-600 to-primary-400 dark:from-primary-400 dark:to-neon-green bg-clip-text text-transparent",children:"No Uncompleted Tasks"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x||j!=="all"||f!=="all"||b!=="all"||v!=="all"?"Try adjusting your filters to see more tasks.":"All your tasks are completed. Great job!"}),x||j!=="all"||f!=="all"||b!=="all"||v!=="all"?e.jsxs(i,{onClick:F,variant:"outline",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Reset Filters"]}):e.jsx(S,{href:route("group-tasks.create"),children:e.jsx(i,{variant:"glow",children:"Create Task"})})]}),e.jsx(W,{className:"absolute inset-0 size-full stroke-primary-600/10 dark:stroke-neon-green/10"})]})})}),e.jsx(ae,{value:"completed",children:e.jsx(ie,{children:g.filter(s=>s.status==="completed").length>0?e.jsx(n.div,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",variants:z,initial:"hidden",animate:"visible",children:g.filter(s=>s.status==="completed").map(s=>e.jsx(n.div,{variants:d,children:e.jsxs(se,{intensity:5,className:"h-full",children:[e.jsxs(J,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[s.assignment&&s.assignment.group?e.jsx(S,{href:route("group-tasks.show",{group:s.assignment.group.id,assignment:s.assignment.id,task:s.id}),children:e.jsx(M,{className:"text-lg text-primary-600 hover:text-primary-500 dark:text-neon-green dark:hover:text-primary-400 line-clamp-1",children:s.title})}):e.jsx(M,{className:"text-lg line-clamp-1",children:s.title}),e.jsx(p,{className:q(s.status),children:s.status.replace("_"," ")})]}),s.assignment&&e.jsx(Q,{children:s.assignment.title})]}),e.jsxs(Z,{className:"pb-2",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-2",children:s.description||"No description"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ne,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:ce(s.end_date)})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(oe,{className:"mr-1 h-4 w-4"}),de(s.end_date)]})]})]}),e.jsxs(ee,{className:"pt-2 flex justify-between items-center border-t",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.effort_hours," ",s.effort_hours===1?"hour":"hours"]})}),s.assigned_user&&e.jsx(p,{variant:"outline",children:s.assigned_user.name})]})]})},s.id))}):e.jsxs(n.div,{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[30vh] flex items-center justify-center overflow-hidden rounded-xl border",variants:d,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 bg-gradient-to-r from-primary-600 to-primary-400 dark:from-primary-400 dark:to-neon-green bg-clip-text text-transparent",children:"No Completed Tasks"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x||j!=="all"||f!=="all"||b!=="all"||v!=="all"?"Try adjusting your filters to see more tasks.":"You have not completed any tasks yet."}),(x||j!=="all"||f!=="all"||b!=="all"||v!=="all")&&e.jsxs(i,{onClick:F,variant:"outline",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Reset Filters"]})]}),e.jsx(W,{className:"absolute inset-0 size-full stroke-primary-600/10 dark:stroke-neon-green/10"})]})})})]})})})]})]})}export{Is as default};
