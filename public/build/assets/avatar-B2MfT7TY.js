import{r as i,j as v}from"./app-Bpl7UGUW.js";import{u as C,g,c as O,P as N}from"./index-D71eR4x0.js";import{a as b}from"./index-CMRx08MW.js";import{r as _}from"./index-DNoKO7hz.js";import{c as S}from"./utils-CBfrqCZ4.js";function j(t,e){return i.useReducer((a,r)=>e[a][r]??a,t)}var U=t=>{const{present:e,children:a}=t,r=F(e),o=typeof a=="function"?a({present:r.isPresent}):i.Children.only(a),n=C(r.ref,k(o));return typeof a=="function"||r.isPresent?i.cloneElement(o,{ref:n}):null};U.displayName="Presence";function F(t){const[e,a]=i.useState(),r=i.useRef(null),o=i.useRef(t),n=i.useRef("none"),d=t?"mounted":"unmounted",[c,u]=j(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const s=p(r.current);n.current=c==="mounted"?s:"none"},[c]),g(()=>{const s=r.current,l=o.current;if(l!==t){const A=n.current,f=p(s);t?u("MOUNT"):f==="none"||s?.display==="none"?u("UNMOUNT"):u(l&&A!==f?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),g(()=>{if(e){let s;const l=e.ownerDocument.defaultView??window,m=f=>{const P=p(r.current).includes(f.animationName);if(f.target===e&&P&&(u("ANIMATION_END"),!o.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",s=l.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},A=f=>{f.target===e&&(n.current=p(r.current))};return e.addEventListener("animationstart",A),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{l.clearTimeout(s),e.removeEventListener("animationstart",A),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(s=>{r.current=s?getComputedStyle(s):null,a(s)},[])}}function p(t){return t?.animationName||"none"}function k(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning;return a?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=e&&"isReactWarning"in e&&e.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var W=_();function D(){return W.useSyncExternalStore(z,()=>!0,()=>!1)}function z(){return()=>{}}var E="Avatar",[$,Z]=O(E),[q,y]=$(E),M=i.forwardRef((t,e)=>{const{__scopeAvatar:a,...r}=t,[o,n]=i.useState("idle");return v.jsx(q,{scope:a,imageLoadingStatus:o,onImageLoadingStatusChange:n,children:v.jsx(N.span,{...r,ref:e})})});M.displayName=E;var R="AvatarImage",h=i.forwardRef((t,e)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:o=()=>{},...n}=t,d=y(R,a),c=H(r,n),u=b(s=>{o(s),d.onImageLoadingStatusChange(s)});return g(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?v.jsx(N.img,{...n,ref:e,src:r}):null});h.displayName=R;var I="AvatarFallback",w=i.forwardRef((t,e)=>{const{__scopeAvatar:a,delayMs:r,...o}=t,n=y(I,a),[d,c]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),d&&n.imageLoadingStatus!=="loaded"?v.jsx(N.span,{...o,ref:e}):null});w.displayName=I;function L(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function H(t,{referrerPolicy:e,crossOrigin:a}){const r=D(),o=i.useRef(null),n=r?(o.current||(o.current=new window.Image),o.current):null,[d,c]=i.useState(()=>L(n,t));return g(()=>{c(L(n,t))},[n,t]),g(()=>{const u=m=>()=>{c(m)};if(!n)return;const s=u("loaded"),l=u("error");return n.addEventListener("load",s),n.addEventListener("error",l),e&&(n.referrerPolicy=e),typeof a=="string"&&(n.crossOrigin=a),()=>{n.removeEventListener("load",s),n.removeEventListener("error",l)}},[n,a,e]),d}var V=M,B=h,G=w;function ee({className:t,...e}){return v.jsx(V,{"data-slot":"avatar",className:S("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...e})}function te({className:t,...e}){return v.jsx(B,{"data-slot":"avatar-image",className:S("aspect-square size-full",t),...e})}function ne({className:t,...e}){return v.jsx(G,{"data-slot":"avatar-fallback",className:S("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}export{ee as A,U as P,te as a,ne as b};
