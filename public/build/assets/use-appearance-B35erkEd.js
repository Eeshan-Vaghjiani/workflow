import{r as n}from"./app-EFdNlzF1.js";function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function m(t,c,a=365){const e=new Date;e.setTime(e.getTime()+a*24*60*60*1e3);const s=`; expires=${e.toUTCString()}`;document.cookie=`${t}=${c}${s}; path=/`}function l(){const[t,c]=n.useState(()=>{if(typeof window<"u"){const e=localStorage.getItem("theme");return e||(localStorage.setItem("theme","system"),"system")}return"system"});n.useEffect(()=>{const e=window.document.documentElement;e.classList.add("theme-transition"),e.classList.remove("light","dark");const s=t==="system"?i():t;if(e.classList.add(s),console.log("Theme changed:",{theme:t,effectiveTheme:s,systemPrefersDark:window.matchMedia("(prefers-color-scheme: dark)").matches}),localStorage.setItem("theme",t),m("appearance",t),setTimeout(()=>{e.classList.remove("theme-transition")},300),t==="system"){const o=localStorage.getItem("previous_theme");if(o&&o!=="system"){const r=window.location.href;setTimeout(()=>{window.location.href=r},50)}}localStorage.setItem("previous_theme",t)},[t]),n.useEffect(()=>{if(t!=="system")return;const e=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{const o=window.document.documentElement;o.classList.add("theme-transition"),o.classList.remove("light","dark");const r=i();o.classList.add(r),console.log("System theme changed:",{newTheme:r,prefersDark:e.matches}),setTimeout(()=>{o.classList.remove("theme-transition")},300)};return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[t]),n.useEffect(()=>{if(t==="system"){const e=window.document.documentElement,s=i();s==="light"&&e.classList.contains("dark")?(e.classList.remove("dark"),e.classList.add("light")):s==="dark"&&!e.classList.contains("dark")&&(e.classList.remove("light"),e.classList.add("dark"))}},[]);const a=e=>{c(e)};return{theme:t,setTheme:a,appearance:t,updateAppearance:a}}export{l as u};
